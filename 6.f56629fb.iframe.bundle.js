"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[6],{"./src/components/icons/BarcodeIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BarcodeIcon=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),__WEBPACK_DEFAULT_EXPORT__=BarcodeIcon;try{BarcodeIcon.displayName="BarcodeIcon",BarcodeIcon.__docgenInfo={description:"Barcode SVG icon",displayName:"BarcodeIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/BarcodeIcon.tsx#BarcodeIcon"]={docgenInfo:BarcodeIcon.__docgenInfo,name:"BarcodeIcon",path:"src/components/icons/BarcodeIcon.tsx#BarcodeIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/BubleChatIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BubleChatIcon=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{"data-testid":"buble-chat-icon",xmlns:"http://www.w3.org/2000/svg",height:"20px",viewBox:"0 -960 960 960",width:"20px",fill:"currentColor",className:`w-5 h-5 ${props.className}`,...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M250-394h316v-52H250v52Zm0-132h460v-52H250v52Zm0-132h460v-52H250v52ZM116-134.46v-645.23q0-27.01 18.65-45.66Q153.3-844 180.31-844h599.38q27.01 0 45.66 18.65Q844-806.7 844-779.69v455.38q0 27.01-18.65 45.66Q806.7-260 779.69-260H241.54L116-134.46ZM220-312h559.69q4.62 0 8.46-3.85 3.85-3.84 3.85-8.46v-455.38q0-4.62-3.85-8.46-3.84-3.85-8.46-3.85H180.31q-4.62 0-8.46 3.85-3.85 3.84-3.85 8.46v520.08L220-312Zm-52 0v-480 480Z"})}),__WEBPACK_DEFAULT_EXPORT__=BubleChatIcon;try{BubleChatIcon.displayName="BubleChatIcon",BubleChatIcon.__docgenInfo={description:"",displayName:"BubleChatIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/BubleChatIcon.tsx#BubleChatIcon"]={docgenInfo:BubleChatIcon.__docgenInfo,name:"BubleChatIcon",path:"src/components/icons/BubleChatIcon.tsx#BubleChatIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/FlagIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const FlagIcon=props=>{var _props$height;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{"data-testid":"flag-icon",xmlns:"http://www.w3.org/2000/svg",height:`${null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:"24px"}`,viewBox:"0 0 20 20",fill:"currentColor",className:`w-5 h-5 ${props.className}`,...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none",clipRule:"evenodd"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z",clipRule:"evenodd"})]})},__WEBPACK_DEFAULT_EXPORT__=FlagIcon;try{FlagIcon.displayName="FlagIcon",FlagIcon.__docgenInfo={description:"",displayName:"FlagIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/FlagIcon.tsx#FlagIcon"]={docgenInfo:FlagIcon.__docgenInfo,name:"FlagIcon",path:"src/components/icons/FlagIcon.tsx#FlagIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/labware/Labware.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>labware_Labware});var react=__webpack_require__("./node_modules/react/index.js"),classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames);function brightenColor(color){if(!color)return"";const currentVariantNumber=getColorVariant(color);return-1===currentVariantNumber||900===currentVariantNumber?color:50===currentVariantNumber?color.replace(/\d{2,3}$/,`${currentVariantNumber+50}`):color.replace(/\d{2,3}$/,`${currentVariantNumber+100}`)}function getColorVariant(color){const currentVariantNumber=color.match(/\d{2,3}$/);return currentVariantNumber?parseInt(currentVariantNumber[0]):-1}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const CrossOverIcon=props=>(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"40",viewBox:"0 -960 960 960",width:"40",children:(0,jsx_runtime.jsx)("path",{d:"m252.615-217.232-35.383-35.383L444.616-480 217.232-707.385l35.383-35.383L480-515.384l227.385-227.384 35.383 35.383L515.384-480l227.384 227.385-35.383 35.383L480-444.616 252.615-217.232Z"})}),icons_CrossOverIcon=CrossOverIcon;try{CrossOverIcon.displayName="CrossOverIcon",CrossOverIcon.__docgenInfo={description:"Remove SVG icon",displayName:"CrossOverIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/CrossOverIcon.tsx#CrossOverIcon"]={docgenInfo:CrossOverIcon.__docgenInfo,name:"CrossOverIcon",path:"src/components/icons/CrossOverIcon.tsx#CrossOverIcon"})}catch(__react_docgen_typescript_loader_error){}function Slot(_ref){var _ref2,_ref3;let{address,slot,size,onClick,onCtrlClick,onShiftClick,onMouseEnter,onMouseLeave,color,text,secondaryText,selected,isCleanedOut}=_ref;const slotText=null!==(_ref2=text&&text(address,slot))&&void 0!==_ref2?_ref2:address,slotSecondaryText=null!==(_ref3=secondaryText&&secondaryText(address,slot))&&void 0!==_ref3?_ref3:null,bgColor=color&&color(address,slot),slotClassNames=classnames_default()({"transition duration-150 ease-in-out cursor-pointer":onClick&&!isCleanedOut,"hover:bg-gray-200":onClick&&!bgColor&&!isCleanedOut,[`hover:${brightenColor(bgColor)}`]:onClick&&bgColor&&!isCleanedOut,[`${bgColor} text-gray-100`]:bgColor,"bg-gray-100 text-gray-800":!bgColor,"ring ring-pink-600 ring-offset-2":selected,"border border-gray-800":!selected,"h-20 w-20":"large"===size,"h-16 w-16":"medium"===size,"h-12 w-12":"small"===size},"inline-flex flex-col items-center justify-center mx-auto rounded-full text-xs font-semibold"),onClickHandler=react.useCallback((e=>{e.shiftKey?null==onShiftClick||onShiftClick(address,slot):e.ctrlKey||e.metaKey?null==onCtrlClick||onCtrlClick(address,slot):null==onClick||onClick(address,slot)}),[onClick,onCtrlClick,onShiftClick,address,slot]),onMouseEnterHandler=react.useCallback((()=>{null==onMouseEnter||onMouseEnter(address,slot)}),[onMouseEnter,address,slot]),onMouseLeaveHandler=react.useCallback((()=>{null==onMouseLeave||onMouseLeave(address,slot)}),[onMouseLeave,address,slot]);return isCleanedOut?(0,jsx_runtime.jsxs)("div",{onMouseEnter:onMouseEnterHandler,onMouseLeave:onMouseLeaveHandler,className:slotClassNames,"data-testid":"slot",children:[(0,jsx_runtime.jsx)(icons_CrossOverIcon,{}),secondaryText&&(0,jsx_runtime.jsx)("p",{className:"truncate",children:slotSecondaryText})]}):(0,jsx_runtime.jsxs)("div",{onClick:onClickHandler,onMouseEnter:onMouseEnterHandler,onMouseLeave:onMouseLeaveHandler,className:slotClassNames,"data-testid":"slot",children:[(0,jsx_runtime.jsx)("p",{className:"truncate",children:slotText}),secondaryText&&(0,jsx_runtime.jsx)("p",{className:"truncate",children:slotSecondaryText})]})}try{Slot.displayName="Slot",Slot.__docgenInfo={description:"",displayName:"Slot",props:{address:{defaultValue:null,description:"",name:"address",required:!0,type:{name:"string"}},slot:{defaultValue:null,description:"",name:"slot",required:!0,type:{name:"SlotFieldsFragment"}},size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"enum",value:[{value:'"small"'},{value:'"medium"'},{value:'"large"'}]}},onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onCtrlClick:{defaultValue:null,description:"",name:"onCtrlClick",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onShiftClick:{defaultValue:null,description:"",name:"onShiftClick",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onMouseEnter:{defaultValue:null,description:"",name:"onMouseEnter",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onMouseLeave:{defaultValue:null,description:"",name:"onMouseLeave",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},color:{defaultValue:null,description:"",name:"color",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},text:{defaultValue:null,description:"",name:"text",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},secondaryText:{defaultValue:null,description:"",name:"secondaryText",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},selected:{defaultValue:null,description:"",name:"selected",required:!0,type:{name:"boolean"}},isCleanedOut:{defaultValue:null,description:"",name:"isCleanedOut",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/labware/Slot.tsx#Slot"]={docgenInfo:Slot.__docgenInfo,name:"Slot",path:"src/components/labware/Slot.tsx#Slot"})}catch(__react_docgen_typescript_loader_error){}var helpers=__webpack_require__("./src/lib/helpers.ts"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),lodash_default=__webpack_require__.n(lodash),sdk=__webpack_require__("./src/types/sdk.ts"),xstate_esm=__webpack_require__("./node_modules/xstate/dist/xstate.esm.js"),log_2a773d37_esm=__webpack_require__("./node_modules/xstate/dist/log-2a773d37.esm.js"),slotHelper=__webpack_require__("./src/lib/helpers/slotHelper.ts"),labwareHelper=__webpack_require__("./src/lib/helpers/labwareHelper.ts");const labware_machine=function createLabwareMachine(){return(0,xstate_esm.Op)({id:"labwareMachine",types:{},initial:"unknown",context:_ref=>{var _input$slots,_input$selectedAddres,_input$lastSelectedAd,_input$selectionMode,_input$selectable;let{input}=_ref;return{slots:null!==(_input$slots=input.slots)&&void 0!==_input$slots?_input$slots:[],selectedAddresses:null!==(_input$selectedAddres=input.selectedAddresses)&&void 0!==_input$selectedAddres?_input$selectedAddres:new Set,lastSelectedAddress:null!==(_input$lastSelectedAd=input.lastSelectedAddress)&&void 0!==_input$lastSelectedAd?_input$lastSelectedAd:null,selectionMode:null!==(_input$selectionMode=input.selectionMode)&&void 0!==_input$selectionMode?_input$selectionMode:"single",selectable:null!==(_input$selectable=input.selectable)&&void 0!==_input$selectable?_input$selectable:"none"}},on:{RESET_SELECTED:{actions:"clearSelectedSlots"},CHANGE_SELECTION_MODE:{actions:(0,log_2a773d37_esm.a)((_ref2=>{let{context,event}=_ref2;return{...context,selectable:event.selectable,selectionMode:event.selectionMode,selectedAddresses:new Set}})),target:".unknown"},UPDATE_SLOTS:{actions:"updateSlots"}},states:{unknown:{always:chooseState},non_selectable:{},selectable:{initial:"any",states:{any:{initial:"single",states:{single:{on:{SELECT_SLOT:singleSelectSlotHandler,CTRL_SELECT_SLOT:singleCtrlSelectSlotHandler}},multi:{on:{SELECT_SLOT:multiSelectSlotHandler,SELECT_TO_SLOT:multiSelectToSlotHandler,CTRL_SELECT_SLOT:multiCtrlSelectSlotHandler}}}},non_empty:{initial:"single",states:{single:{on:{SELECT_SLOT:[isSelectedEmptyHandler,...singleSelectSlotHandler],CTRL_SELECT_SLOT:[isSelectedEmptyHandler,...singleCtrlSelectSlotHandler]}},multi:{on:{SELECT_SLOT:[isSelectedEmptyHandler,...multiSelectSlotHandler],SELECT_TO_SLOT:[isSelectedEmptyHandler,...multiSelectToSlotHandler],CTRL_SELECT_SLOT:[isSelectedEmptyHandler,...multiCtrlSelectSlotHandler]}}}},empty:{initial:"single",states:{single:{on:{SELECT_SLOT:[isSelectedNotEmptyHandler,...singleSelectSlotHandler],CTRL_SELECT_SLOT:[isSelectedNotEmptyHandler,...singleCtrlSelectSlotHandler]}},multi:{on:{SELECT_SLOT:[isSelectedNotEmptyHandler,...multiSelectSlotHandler],SELECT_TO_SLOT:[isSelectedNotEmptyHandler,...multiSelectToSlotHandler],CTRL_SELECT_SLOT:[isSelectedNotEmptyHandler,...multiCtrlSelectSlotHandler]}}}}}},locked:{}}},{actions:{clearSelectedSlots:(0,log_2a773d37_esm.a)((_ref3=>{let{context}=_ref3;return{...context,selectedAddresses:new Set}})),deselectSlot:(0,log_2a773d37_esm.a)((_ref4=>{let{context,event}=_ref4;return"address"in event?{...context,selectedAddresses:new Set([...context.selectedAddresses].filter((a=>a!==event.address)))}:context})),forwardEvent:(0,log_2a773d37_esm.b)((_ref5=>{let{context,event,enqueue}=_ref5;enqueue(event)})),selectSlot:(0,log_2a773d37_esm.a)((_ref6=>{let{context,event}=_ref6;return"address"in event?{...context,selectedAddresses:new Set([...context.selectedAddresses]).add(event.address)}:context})),storeLastSelectedSlot:(0,log_2a773d37_esm.a)((_ref7=>{let{context,event}=_ref7;return"address"in event?{...context,lastSelectedAddress:event.address}:context})),selectSlotsBetween:(0,log_2a773d37_esm.a)((_ref8=>{let{context,event,self}=_ref8;if("SELECT_TO_SLOT"!==event.type||null==context.lastSelectedAddress)return context;const sortedSlots=(0,labwareHelper.pk)(context.slots),selectedAddressIndex=sortedSlots.findIndex((slot=>slot.address===event.address)),lastSelectedAddressIndex=sortedSlots.findIndex((slot=>slot.address===context.lastSelectedAddress)),[startSlotIndex,endSlotIndex]=[selectedAddressIndex,lastSelectedAddressIndex].sort(((a,b)=>a-b));let selectedSlots=sortedSlots.slice(startSlotIndex,endSlotIndex+1);const snapshot=self.getSnapshot();snapshot.matches({selectable:{non_empty:"multi"}})?selectedSlots=(0,slotHelper.aD)(selectedSlots):snapshot.matches({selectable:{empty:"multi"}})&&(selectedSlots=(0,slotHelper.J1)(selectedSlots));const selectedAddresses=new Set(context.selectedAddresses);return selectedSlots.forEach((slot=>selectedAddresses.add(slot.address))),{...context,selectedAddresses}})),updateSlots:(0,log_2a773d37_esm.a)((_ref9=>{let{context,event}=_ref9;return"UPDATE_SLOTS"===event.type?{...context,slots:event.slots}:context}))},guards:{isSelectedEmpty:_ref10=>{let{context,event}=_ref10;return"address"in event&&(0,slotHelper.yr)((0,slotHelper.ZA)(context.slots,event.address))},isSelectedNotEmpty:_ref11=>{let{context,event}=_ref11;return"address"in event&&(0,slotHelper.lA)((0,slotHelper.ZA)(context.slots,event.address))},isSlotSelected:_ref12=>{let{context,event}=_ref12;return"address"in event&&context.selectedAddresses.has(event.address)},isLastSelectedSlot:_ref13=>{let{context,event}=_ref13;return null!=context.lastSelectedAddress}}})},chooseState=[{guard:_ref14=>{let{context}=_ref14;return"none"===context.selectable},target:"non_selectable"},{guard:_ref15=>{let{context}=_ref15;return"any"===context.selectable&&"single"===context.selectionMode},target:"selectable.any.single"},{guard:_ref16=>{let{context}=_ref16;return"any"===context.selectable&&"multi"===context.selectionMode},target:"selectable.any.multi"},{guard:_ref17=>{let{context}=_ref17;return"non_empty"===context.selectable&&"single"===context.selectionMode},target:"selectable.non_empty.single"},{guard:_ref18=>{let{context}=_ref18;return"non_empty"===context.selectable&&"multi"===context.selectionMode},target:"selectable.non_empty.multi"},{guard:_ref19=>{let{context}=_ref19;return"empty"===context.selectable&&"single"===context.selectionMode},target:"selectable.empty.single"},{guard:_ref20=>{let{context}=_ref20;return"empty"===context.selectable&&"multi"===context.selectionMode},target:"selectable.empty.multi"}],isSelectedEmptyHandler={guard:"isSelectedEmpty"},isSelectedNotEmptyHandler={guard:"isSelectedNotEmpty"},singleSelectSlotHandler=[{guard:"isSlotSelected"},{actions:["clearSelectedSlots","selectSlot"]}],singleCtrlSelectSlotHandler=[{guard:"isSlotSelected",actions:["deselectSlot"]},{actions:["clearSelectedSlots","selectSlot"]}],multiSelectSlotHandler=[{actions:["clearSelectedSlots","selectSlot","storeLastSelectedSlot"]}],multiSelectToSlotHandler=[{guard:"isSlotSelected",actions:["deselectSlot"]},{guard:"isLastSelectedSlot",actions:["selectSlotsBetween"]},{actions:["selectSlot","storeLastSelectedSlot"]}],multiCtrlSelectSlotHandler=[{guard:"isSlotSelected",actions:["deselectSlot"]},{actions:["selectSlot"]}];var xstate_react_esm=__webpack_require__("./node_modules/@xstate/react/dist/xstate-react.esm.js");const SlotColumnInfo=_ref=>{let{slotColumn,slotBuilder,alignRight=!1,dataTestid}=_ref;return(0,jsx_runtime.jsx)("div",{"data-testid":null!=dataTestid?dataTestid:"",className:"flex flex-col px-8 py-2 select-none",children:slotColumn.map((slot=>(0,jsx_runtime.jsxs)("div",{"data-testid":"slot-address",children:[(0,jsx_runtime.jsx)("div",{className:`flex flex-col ${alignRight&&"items-end"} font-medium`,children:slot.address}),(0,jsx_runtime.jsx)("div",{className:"flex",children:slotBuilder(slot)})]},slot.address)))})},labware_SlotColumnInfo=SlotColumnInfo;try{SlotColumnInfo.displayName="SlotColumnInfo",SlotColumnInfo.__docgenInfo={description:"*\nComponent to display a column of slot fields that contains a label with slot address and component returned by SlotBuilder callback",displayName:"SlotColumnInfo",props:{slotColumn:{defaultValue:null,description:"",name:"slotColumn",required:!0,type:{name:"SlotFieldsFragment[]"}},slotBuilder:{defaultValue:null,description:"",name:"slotBuilder",required:!0,type:{name:"(slot: SlotFieldsFragment) => ReactNode"}},numRows:{defaultValue:null,description:"",name:"numRows",required:!0,type:{name:"number"}},alignRight:{defaultValue:{value:"false"},description:"",name:"alignRight",required:!1,type:{name:"boolean"}},dataTestid:{defaultValue:null,description:"",name:"dataTestid",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/labware/SlotColumnInfo.tsx#SlotColumnInfo"]={docgenInfo:SlotColumnInfo.__docgenInfo,name:"SlotColumnInfo",path:"src/components/labware/SlotColumnInfo.tsx#SlotColumnInfo"})}catch(__react_docgen_typescript_loader_error){}var dist=__webpack_require__("./node_modules/react-router-dom/dist/index.js"),FlagIcon=__webpack_require__("./src/components/icons/FlagIcon.tsx"),BarcodeIcon=__webpack_require__("./src/components/icons/BarcodeIcon.tsx"),BubleChatIcon=__webpack_require__("./src/components/icons/BubleChatIcon.tsx");const Labware=_ref=>{var _labware$barcode;let{labware,onClick,onSlotClick,onSlotCtrlClick,selectionMode="single",selectable="none",name,onSelect,onSlotMouseEnter,onSlotMouseLeave,slotText,slotSecondaryText,slotColor,labwareRef,slotBuilder,cleanedOutAddresses,barcodeInfoPosition,gridDirection,highlightedSlots,labwareDirection,labwareRefCallback}=_ref;const labwareMachine=react.useMemo((()=>labware_machine()),[]),[current,send]=(0,xstate_react_esm.zl)(labwareMachine,{input:{selectionMode,selectable,slots:labware.slots,selectedAddresses:new Set,lastSelectedAddress:null}}),{selectedAddresses}=current.context,selectedAddressesRef=react.useRef(),{labwareType:{numRows,numColumns},slots,barcode}=labware,isFlagged=(0,react.useMemo)((()=>labware.flagged),[labware]);(0,react.useImperativeHandle)(labwareRef,(()=>({deselectAll:()=>send({type:"RESET_SELECTED"})}))),(0,react.useImperativeHandle)(labwareRefCallback,(()=>({deselectAll:()=>send({type:"RESET_SELECTED"})}))),(0,react.useEffect)((()=>{send({type:"CHANGE_SELECTION_MODE",selectionMode,selectable})}),[send,selectionMode,selectable]),(0,react.useEffect)((()=>{send({type:"UPDATE_SLOTS",slots:null!=slots?slots:[]})}),[send,slots]),(0,react.useEffect)((()=>{selectedAddressesRef.current&&(0,helpers.sn)(Array.from(selectedAddresses),Array.from(selectedAddressesRef.current))||(selectedAddressesRef.current=selectedAddresses,null==onSelect||onSelect(Array.from(selectedAddresses)))}),[onSelect,selectedAddresses]);const grid=labwareDirection&&labwareDirection===helpers.Kn.Horizontal?`grid grid-cols-${numRows} grid-rows-${numColumns}`:`grid grid-rows-${numRows} grid-cols-${numColumns}`,gridClasses=classnames_default()({"px-12 gap-4":numColumns<=3,"px-10 gap-3":numColumns<=5,"px-6 gap-2":numColumns>6},`${grid} py-4 select-none`),_slotColor=null!=slotColor?slotColor:(address,slot)=>slotHelper._h(slot)?"bg-gradient-to-r from-purple-400 via-pink-500 to-red-500":slotHelper.lA(slot)?"bg-sdb-300":void 0,slotByAddress=lodash_default().keyBy(slots,"address"),internalOnClick=react.useCallback(((address,slot)=>{null==onSlotClick||onSlotClick(address,slot),send({type:"SELECT_SLOT",address})}),[onSlotClick,send]),onCtrlClick=(0,react.useCallback)(((address,slot)=>{null==onSlotCtrlClick||onSlotCtrlClick(address,slot),send({type:"CTRL_SELECT_SLOT",address})}),[send,onSlotCtrlClick]),onShiftClick=(0,react.useCallback)((address=>{send({type:"SELECT_TO_SLOT",address})}),[send]),slotColumns=react.useMemo((()=>{if(numColumns>2)return[];const slotColumns=new Array(numColumns);return slots.forEach(((slot,index)=>{const colIndex=index%numColumns;slotColumns[colIndex]||(slotColumns[colIndex]=new Array),slotColumns[index%numColumns].push(slot)})),slotColumns}),[numColumns,slots]),isBarcodeInfoAtTheTop=barcodeInfoPosition===helpers.yX.TopLeft||barcodeInfoPosition===helpers.yX.TopRight,isBarcodeInfoAtTheBottom=barcodeInfoPosition===helpers.yX.BottomRight||barcodeInfoPosition===helpers.yX.BottomLeft,isBarcodeInfoAtTheLeft=barcodeInfoPosition===helpers.yX.TopLeft||barcodeInfoPosition===helpers.yX.BottomLeft,BarcodeInformation=()=>(0,jsx_runtime.jsxs)("div",{className:"flex flex-col py-2 px-3 text-xs leading-4 font-medium text-gray-500 uppercase tracking-wider "+(barcodeInfoPosition&&isBarcodeInfoAtTheLeft?"items-end":"items-start"),children:[name&&(0,jsx_runtime.jsx)("span",{children:name}),barcode&&!isFlagged&&(0,jsx_runtime.jsxs)("span",{className:"inline-flex",children:[(0,jsx_runtime.jsx)(BarcodeIcon.A,{className:"mr-1 h-4 w-4 text-gray-500"}),barcode]}),barcode&&"flagPriority"in labware?(0,jsx_runtime.jsx)("span",{children:(0,jsx_runtime.jsxs)(dist.N_,{className:"flex flex-row text-sp-700 hover:text-sp-800 font-semibold hover:underline",to:`/labware/${barcode}`,target:"_blank",children:[labware.flagPriority===sdk.ZpU.Flag&&(0,jsx_runtime.jsx)(FlagIcon.A,{className:"h-4 w-4 inline-block mb-2 mr-1 -ml-1"}),labware.flagPriority===sdk.ZpU.Note&&(0,jsx_runtime.jsx)(BubleChatIcon.A,{className:"h-4 w-4 inline-block mb-2 mr-1 -ml-1"}),barcode]})}):""]});return(0,jsx_runtime.jsxs)("div",{className:"flex flex-row","data-testid":`labware-${null!==(_labware$barcode=labware.barcode)&&void 0!==_labware$barcode?_labware$barcode:""}`,children:[slotColumns.length>0&&slotBuilder&&(0,jsx_runtime.jsx)(labware_SlotColumnInfo,{slotColumn:slotColumns[0],slotBuilder,numRows}),(0,jsx_runtime.jsxs)("div",{onClick:()=>null==onClick?void 0:onClick(),className:"inline-block border border-sdb py-2 bg-blue-100 rounded-lg transition duration-300 ease-in-out",children:[barcodeInfoPosition&&isBarcodeInfoAtTheTop&&BarcodeInformation(),(0,jsx_runtime.jsx)("div",{className:gridClasses,children:(0,helpers.x)({numColumns,numRows},gridDirection).map(((address,i)=>{var _highlightedSlots$has;return(0,jsx_runtime.jsx)(Slot,{address,slot:slotByAddress[address],size:numColumns>2?"medium":numColumns>6||numRows>6?"small":"large",onClick:internalOnClick,onCtrlClick,onShiftClick,onMouseEnter:onSlotMouseEnter,onMouseLeave:onSlotMouseLeave,text:slotText,secondaryText:slotSecondaryText,color:_slotColor,selected:(null==selectedAddresses?void 0:selectedAddresses.has(address))||null!==(_highlightedSlots$has=null==highlightedSlots?void 0:highlightedSlots.has(address))&&void 0!==_highlightedSlots$has&&_highlightedSlots$has,isCleanedOut:null==cleanedOutAddresses?void 0:cleanedOutAddresses.includes(address)},i)}))}),(!barcodeInfoPosition||isBarcodeInfoAtTheBottom)&&BarcodeInformation()]}),slotColumns.length>1&&slotBuilder&&(0,jsx_runtime.jsx)(labware_SlotColumnInfo,{slotColumn:slotColumns[1],slotBuilder,numRows,alignRight:!0})]})},labware_Labware=Labware;try{Labware.displayName="Labware",Labware.__docgenInfo={description:"Component for displaying an individual piece of labware and its slots.\n\nLabware will contain a grid of slots, each of which can hold zero to many samples. The colour and text of each slot\ncan be controlled with callbacks to `slotColor` and `slotText`.\n\nSelection of slots can be controlled with the `selectionMode` and `selectable` parameters. See the params for more details.",displayName:"Labware",props:{labware:{defaultValue:null,description:"The labware to display. May be a new piece of labware not yet persisted on core.",name:"labware",required:!0,type:{name:"LabwareFlaggedFieldsFragment | NewFlaggedLabwareLayout | NewLabwareLayout"}},name:{defaultValue:null,description:"(Optional) Name to be displayed on the labware",name:"name",required:!1,type:{name:"string"}},onClick:{defaultValue:null,description:"Callback for when the labware is clicked",name:"onClick",required:!1,type:{name:"(() => void)"}},selectionMode:{defaultValue:{value:"single"},description:"What selection mode should the labware be in? This parameter is ignored if `selectable` is `none`.\n\n<ul>\n  <li>`single` - only a single slot can be selected at once</li>\n  <li>`multi` - multiple slots can be selected at once</li>\n</ul>",name:"selectionMode",required:!1,type:{name:"enum",value:[{value:'"single"'},{value:'"multi"'}]}},selectable:{defaultValue:{value:"none"},description:"Which slots are allowed to be selected?\n<ul>\n  <li>`none` - No slots can be selected</li>\n  <li>`any` - Any slots can be selected</li>\n  <li>`non_empty` - Only slots with samples in can be selected</li>\n  <li>`empty` - Only slots without samples in can be selected</li>\n</ul>",name:"selectable",required:!1,type:{name:"enum",value:[{value:'"none"'},{value:'"any"'},{value:'"non_empty"'},{value:'"empty"'}]}},onSlotClick:{defaultValue:null,description:"Callback for when a slot is clicked\n@param address the address of the clicked slot\n@param slot the slot",name:"onSlotClick",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onSlotCtrlClick:{defaultValue:null,description:"Callback for when a slot is clicked with Ctrl button held\n@param address the address of the clicked slot\n@param slot the slot",name:"onSlotCtrlClick",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onSelect:{defaultValue:null,description:"Callback for when slots are selected\n@param selected the addresses of the selected slots",name:"onSelect",required:!1,type:{name:"((selected: string[]) => void)"}},onSlotMouseEnter:{defaultValue:null,description:"Callback for when the mouse first hovers over a slot\n@param address the address of the slot\n@param slot the slot",name:"onSlotMouseEnter",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},onSlotMouseLeave:{defaultValue:null,description:"Callback for when the mouse moves off a slot\n@param address the address of the slot\n@param slot the slot",name:"onSlotMouseLeave",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => void)"}},slotText:{defaultValue:null,description:"Callback to customise the text for an individual slot\n@param address the address of the slot to customise text of\n@param slot the slot",name:"slotText",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},slotSecondaryText:{defaultValue:null,description:"Callback to customise the secondary text for an individual slot. Secondary text appears under slotText.\n@param address the address of the slot to customise secondary text of\n@param slot the slot",name:"slotSecondaryText",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},slotColor:{defaultValue:null,description:"Callback to customise the text for an individual slot\n@param address the address of the slot\n@param slot the slot",name:"slotColor",required:!1,type:{name:"((address: string, slot: SlotFieldsFragment) => string)"}},labwareRef:{defaultValue:null,description:"",name:"labwareRef",required:!1,type:{name:"RefObject<LabwareImperativeRef>"}},labwareRefCallback:{defaultValue:null,description:"A callback used to manage references to individual labware elements.\nThis is useful for dynamically tracking labware elements in a collection.",name:"labwareRefCallback",required:!1,type:{name:"((el: LabwareImperativeRef) => void)"}},slotBuilder:{defaultValue:null,description:"A callback that will be called for each slot in the labware. Must return a react component that will be placed\nin the labelled slot beside the component\n@param slot a slot on the given labware",name:"slotBuilder",required:!1,type:{name:"((slot: SlotFieldsFragment) => ReactNode)"}},cleanedOutAddresses:{defaultValue:null,description:"Cleaned out addresses are addresses that have been cleaned out and should not be used for storing samples.\nCleaned out addresses are displayed crossed over in the UI.",name:"cleanedOutAddresses",required:!1,type:{name:"string[]"}},barcodeInfoPosition:{defaultValue:null,description:"",name:"barcodeInfoPosition",required:!1,type:{name:"enum",value:[{value:'"TopRight"'},{value:'"BottomRight"'},{value:'"TopLeft"'},{value:'"BottomLeft"'}]}},gridDirection:{defaultValue:null,description:"Specifies the grid direction used to determine the positioning of wells inside the labware.",name:"gridDirection",required:!1,type:{name:"enum",value:[{value:'"RightDown"'},{value:'"DownRight"'},{value:'"RightUp"'},{value:'"UpRight"'},{value:'"LeftUp"'}]}},highlightedSlots:{defaultValue:null,description:"Callback to highlight slots due to an external action\nwithout requiring direct selection or clicking on the slot.\nThis is useful when existing actions are already hooked to\nthe `onSelect` and `onClick` events.\n@param addresses The addresses of the slots to highlight.",name:"highlightedSlots",required:!1,type:{name:"Set<string>"}},labwareDirection:{defaultValue:null,description:"Specifies the orientation of the labware layout. Defaults to vertical.",name:"labwareDirection",required:!1,type:{name:"enum",value:[{value:'"Horizontal"'},{value:'"Vertical"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/labware/Labware.tsx#Labware"]={docgenInfo:Labware.__docgenInfo,name:"Labware",path:"src/components/labware/Labware.tsx#Labware"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/helpers/labwareHelper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$Y:()=>getColumnIndex,f6:()=>getRowIndex,jY:()=>convertLabwareToFlaggedLabware,pk:()=>sortDownRight});__webpack_require__("./src/types/sdk.ts"),__webpack_require__("./src/lib/helpers.ts");var lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js");__webpack_require__("./src/types/stan.ts");function getRowIndex(address){return address.charCodeAt(0)-"A".charCodeAt(0)+1}function getColumnIndex(address){return parseInt(address.substr(1))}function sortDownRight(addressable){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.orderBy)(addressable,[a=>getColumnIndex(a.address),a=>getRowIndex(a.address)],["asc","asc"])}const convertLabwareToFlaggedLabware=labware=>labware.map((lw=>({__typename:"LabwareFlagged",flagged:!1,...lw})))},"./src/lib/helpers/slotHelper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function findSlotByAddress(slots,address){const slot=maybeFindSlotByAddress(slots,address);if(null==slot)throw new Error(`Address ${address} could not be found in slots: ${slots.map((slot=>slot.address))}`);return slot}function maybeFindSlotByAddress(slots,address){var _slots$find;return null!==(_slots$find=slots.find((slot=>slot.address===address)))&&void 0!==_slots$find?_slots$find:null}function filledSlots(slots){return slots.filter(isSlotFilled)}function emptySlots(slots){return slots.filter(isSlotEmpty)}function isSlotEmpty(slot){return 0===slot.samples.length}function isSlotFilled(slot){return!isSlotEmpty(slot)}function hasMultipleSamples(slot){return slot.samples.length>1}__webpack_require__.d(__webpack_exports__,{HQ:()=>maybeFindSlotByAddress,J1:()=>emptySlots,ZA:()=>findSlotByAddress,_h:()=>hasMultipleSamples,aD:()=>filledSlots,lA:()=>isSlotFilled,yr:()=>isSlotEmpty})}}]);