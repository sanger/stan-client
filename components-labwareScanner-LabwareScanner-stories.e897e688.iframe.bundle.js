"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[481],{"./src/components/labwareScanner/LabwareScanner.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{LabwareScannerList:()=>LabwareScannerList,LabwareScannerSlotsTableStory:()=>LabwareScannerSlotsTableStory,LabwareScannerTable:()=>LabwareScannerTable,__namedExportsOrder:()=>__namedExportsOrder,default:()=>LabwareScanner_stories});var react=__webpack_require__("./node_modules/react/index.js"),LabwareScanner=__webpack_require__("./src/components/labwareScanner/LabwareScanner.tsx"),motion=__webpack_require__("./node_modules/framer-motion/dist/es/render/dom/motion.mjs"),MutedText=__webpack_require__("./src/components/MutedText.tsx"),LockIcon=__webpack_require__("./src/components/icons/LockIcon.tsx"),react_table=__webpack_require__("./node_modules/react-table/index.js"),Table=__webpack_require__("./src/components/Table.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const DataTableComponent=(_ref,ref)=>{let{columns,data,defaultSort,sortable=!1,fixedHeader=!1,cellClassName}=_ref;const memoedColumns=react.useMemo((()=>columns),[columns]),memoedData=react.useMemo((()=>data),[data]),plugins=[],initialState={};sortable&&(plugins.push(react_table.useSortBy),defaultSort&&(initialState.sortBy=defaultSort));const instance=(0,react_table.useTable)({columns:memoedColumns,data:memoedData,initialState},...plugins),{getTableProps,getTableBodyProps,headerGroups,rows,prepareRow}=instance;return instance.download=()=>rows.map((row=>(prepareRow(row),row.cells.map((cell=>cell.value instanceof Date?cell.value.toLocaleDateString():cell.value))))),(0,react.useImperativeHandle)(ref,(()=>instance.download())),(0,jsx_runtime.jsxs)(Table.Ay,{...getTableProps(),children:[(0,jsx_runtime.jsx)(Table.nd,{fixed:fixedHeader,children:headerGroups.map(((headerGroup,indx)=>(0,react.createElement)("tr",{...headerGroup.getHeaderGroupProps(),key:indx},headerGroup.headers.map((column=>(0,jsx_runtime.jsxs)(Table.A0,{allCapital:column.allCapital,...column.getHeaderProps(sortable?column.getSortByToggleProps():void 0),children:[column.render("Header"),column.isSorted?column.isSortedDesc?(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"inline-block h-4 w-4",children:(0,jsx_runtime.jsx)("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}):(0,jsx_runtime.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"inline-block h-4 w-4",children:(0,jsx_runtime.jsx)("path",{fillRule:"evenodd",d:"M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z",clipRule:"evenodd"})}):""]}))))))}),(0,jsx_runtime.jsx)(Table.BF,{...getTableBodyProps(),children:rows.map((row=>(prepareRow(row),(0,jsx_runtime.jsx)(motion.P.tr,{initial:{x:-20,opacity:0},animate:{x:0,opacity:1},...row.getRowProps(),children:row.cells.map(((cell,indx)=>(0,react.createElement)(Table.nA,{className:cellClassName,...cell.getCellProps(),key:row.index+","+indx},cell.render("Cell"))))}))))})]})},components_DataTable=react.forwardRef(DataTableComponent);var RemoveButton=__webpack_require__("./src/components/buttons/RemoveButton.tsx"),labwareColumns=__webpack_require__("./src/components/dataTableColumns/labwareColumns.tsx");const LabwareScanPanel=_ref=>{let{columns,onRemove}=_ref;const{labwares,removeLabware,locked,enableFlaggedLabwareCheck}=(0,LabwareScanner.P)(),data=react.useMemo((()=>labwares),[labwares]),columnsToDisplay=react.useMemo((()=>columns),[columns]),removeLabwareColumn=react.useMemo((()=>({Header:"",id:"actions",Cell:_ref2=>{let{row}=_ref2;return locked?(0,jsx_runtime.jsx)(LockIcon.A,{className:"block m-2 h-5 w-5 text-gray-800"}):(0,jsx_runtime.jsx)(RemoveButton.A,{type:"button",onClick:()=>{row.original.barcode&&(removeLabware(row.original.barcode),null==onRemove||onRemove(row.original))}})}})),[locked,removeLabware,onRemove]),allColumns=react.useMemo((()=>enableFlaggedLabwareCheck?[...columnsToDisplay.map((c=>"barcode"===c.id?labwareColumns.Ay.flaggedBarcode():c)),removeLabwareColumn]:[...columnsToDisplay,removeLabwareColumn]),[columnsToDisplay,removeLabwareColumn,enableFlaggedLabwareCheck]);return(0,jsx_runtime.jsxs)("div",{children:[0===labwares.length&&(0,jsx_runtime.jsx)(MutedText.A,{children:"Scan a piece of labware to get started"}),labwares.length>0&&(0,jsx_runtime.jsx)(motion.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"mt-3",children:(0,jsx_runtime.jsx)(components_DataTable,{columns:allColumns,data})})]})},labwareScanPanel_LabwareScanPanel=LabwareScanPanel;try{LabwareScanPanel.displayName="LabwareScanPanel",LabwareScanPanel.__docgenInfo={description:"",displayName:"LabwareScanPanel",props:{columns:{defaultValue:null,description:"The list of columns to display in the table",name:"columns",required:!0,type:{name:"Column<LabwareFieldsFragment>[]"}},onRemove:{defaultValue:null,description:"",name:"onRemove",required:!1,type:{name:"((labware: LabwareFlaggedFieldsFragment) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/labwareScanPanel/LabwareScanPanel.tsx#LabwareScanPanel"]={docgenInfo:LabwareScanPanel.__docgenInfo,name:"LabwareScanPanel",path:"src/components/labwareScanPanel/LabwareScanPanel.tsx#LabwareScanPanel"})}catch(__react_docgen_typescript_loader_error){}var dataTableColumns=__webpack_require__("./src/components/dataTableColumns/index.ts");function LabwareScannerSlotsTable(){const{labwares,removeLabware,locked}=(0,LabwareScanner.P)();return(0,jsx_runtime.jsx)("div",{children:labwares.length>0&&(0,jsx_runtime.jsx)(motion.P.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},className:"mt-3",children:(0,jsx_runtime.jsxs)(Table.Ay,{children:[(0,jsx_runtime.jsx)(Table.nd,{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.A0,{children:"Address"}),(0,jsx_runtime.jsx)(Table.A0,{children:"Tissue Type"}),(0,jsx_runtime.jsx)(Table.A0,{children:"Spatial Location"}),(0,jsx_runtime.jsx)(Table.A0,{})]})}),(0,jsx_runtime.jsx)(Table.BF,{children:labwares.flatMap((lw=>lw.slots.map(((slot,i)=>(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.nA,{children:slot.address}),(0,jsx_runtime.jsx)(Table.nA,{children:(0,dataTableColumns.lI)(slot,(sample=>sample.tissue.spatialLocation.tissueType.name))}),(0,jsx_runtime.jsx)(Table.nA,{children:(0,dataTableColumns.lI)(slot,(sample=>String(sample.tissue.spatialLocation.code)))}),0===i&&(0,jsx_runtime.jsx)(Table.nA,{rowSpan:lw.labwareType.numRows*lw.labwareType.numColumns,children:locked?(0,jsx_runtime.jsx)(LockIcon.A,{className:"block m-2 h-5 w-5 text-gray-800"}):(0,jsx_runtime.jsx)(RemoveButton.A,{type:"button",onClick:()=>removeLabware(lw.barcode)})})]},lw.barcode+slot.address)))))})]})})})}try{LabwareScannerSlotsTable.displayName="LabwareScannerSlotsTable",LabwareScannerSlotsTable.__docgenInfo={description:"Table that shows all slots in a Labware. Can only be used within a {@link LabwareScanner }.\nUnfortunately doesn't use ReactTable as that doesn't support a way to use {@code rowSpan}s, which we need here.",displayName:"LabwareScannerSlotsTable",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/labwareScanner/LabwareScannerSlotsTable.tsx#LabwareScannerSlotsTable"]={docgenInfo:LabwareScannerSlotsTable.__docgenInfo,name:"LabwareScannerSlotsTable",path:"src/components/labwareScanner/LabwareScannerSlotsTable.tsx#LabwareScannerSlotsTable"})}catch(__react_docgen_typescript_loader_error){}const LabwareScanner_stories={title:"LabwareScanner",component:LabwareScanner.A},LabwareScannerList=args=>(0,jsx_runtime.jsx)(LabwareScanner.A,{...args,children:(0,jsx_runtime.jsx)(List,{})}),List=()=>{const{labwares,removeLabware}=(0,LabwareScanner.P)();return(0,jsx_runtime.jsx)("ul",{children:labwares.map((lw=>(0,jsx_runtime.jsxs)("li",{children:[lw.barcode," ",(0,jsx_runtime.jsx)("button",{onClick:()=>removeLabware(lw.barcode),className:"text-red-500 font-bold underline",children:"Remove"})]})))})},LabwareScannerTable=args=>(0,jsx_runtime.jsx)(LabwareScanner.A,{...args,children:(0,jsx_runtime.jsx)(labwareScanPanel_LabwareScanPanel,{columns:[labwareColumns.Ay.barcode(),labwareColumns.Ay.externalName(),labwareColumns.Ay.labwareType()]})}),LabwareScannerSlotsTableStory=args=>(0,jsx_runtime.jsx)(LabwareScanner.A,{...args,children:(0,jsx_runtime.jsx)(LabwareScannerSlotsTable,{})});LabwareScannerList.parameters={...LabwareScannerList.parameters,docs:{...LabwareScannerList.parameters?.docs,source:{originalSource:"args => {\n  return <LabwareScanner {...args}>\n      <List />\n    </LabwareScanner>;\n}",...LabwareScannerList.parameters?.docs?.source}}},LabwareScannerTable.parameters={...LabwareScannerTable.parameters,docs:{...LabwareScannerTable.parameters?.docs,source:{originalSource:"args => {\n  return <LabwareScanner {...args}>\n      <LabwareScanPanel columns={[columns.barcode(), columns.externalName(), columns.labwareType()]} />\n    </LabwareScanner>;\n}",...LabwareScannerTable.parameters?.docs?.source}}},LabwareScannerSlotsTableStory.parameters={...LabwareScannerSlotsTableStory.parameters,docs:{...LabwareScannerSlotsTableStory.parameters?.docs,source:{originalSource:"args => {\n  return <LabwareScanner {...args}>\n      <LabwareScannerSlotsTable />\n    </LabwareScanner>;\n}",...LabwareScannerSlotsTableStory.parameters?.docs?.source}}};const __namedExportsOrder=["LabwareScannerList","LabwareScannerTable","LabwareScannerSlotsTableStory"]},"./src/components/icons/BarcodeIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const BarcodeIcon=props=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",...props,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),__WEBPACK_DEFAULT_EXPORT__=BarcodeIcon;try{BarcodeIcon.displayName="BarcodeIcon",BarcodeIcon.__docgenInfo={description:"Barcode SVG icon",displayName:"BarcodeIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/BarcodeIcon.tsx#BarcodeIcon"]={docgenInfo:BarcodeIcon.__docgenInfo,name:"BarcodeIcon",path:"src/components/icons/BarcodeIcon.tsx#BarcodeIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/icons/FlagIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js");const FlagIcon=props=>{var _props$height,_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{"data-testid":"flag-icon",xmlns:"http://www.w3.org/2000/svg",height:"".concat(null!==(_props$height=props.height)&&void 0!==_props$height?_props$height:"24px"),viewBox:"0 0 20 20",fill:"currentColor",className:null!==(_ref="w-5 h-5 "+props.className)&&void 0!==_ref?_ref:"",...props,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M0 0h24v24H0V0z",fill:"none",clipRule:"evenodd"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M12.36 6l.4 2H18v6h-3.36l-.4-2H7V6h5.36M14 4H5v17h2v-7h5.6l.4 2h7V6h-5.6L14 4z",clipRule:"evenodd"})]})},__WEBPACK_DEFAULT_EXPORT__=FlagIcon;try{FlagIcon.displayName="FlagIcon",FlagIcon.__docgenInfo={description:"",displayName:"FlagIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/icons/FlagIcon.tsx#FlagIcon"]={docgenInfo:FlagIcon.__docgenInfo,name:"FlagIcon",path:"src/components/icons/FlagIcon.tsx#FlagIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/helpers/labwareHelper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{$Y:()=>getColumnIndex,f6:()=>getRowIndex,jY:()=>convertLabwareToFlaggedLabware,pk:()=>sortDownRight});__webpack_require__("./src/types/sdk.ts"),__webpack_require__("./src/lib/helpers.ts");var lodash__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/lodash/lodash.js");__webpack_require__("./src/types/stan.ts");function getRowIndex(address){return address.charCodeAt(0)-"A".charCodeAt(0)+1}function getColumnIndex(address){return parseInt(address.substr(1))}function sortDownRight(addressable){return(0,lodash__WEBPACK_IMPORTED_MODULE_2__.orderBy)(addressable,[a=>getColumnIndex(a.address),a=>getRowIndex(a.address)],["asc","asc"])}const convertLabwareToFlaggedLabware=labware=>labware.map((lw=>({__typename:"LabwareFlagged",flagged:!1,...lw})))},"./src/lib/helpers/slotHelper.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function findSlotByAddress(slots,address){const slot=maybeFindSlotByAddress(slots,address);if(null==slot)throw new Error("Address ".concat(address," could not be found in slots: ").concat(slots.map((slot=>slot.address))));return slot}function maybeFindSlotByAddress(slots,address){var _slots$find;return null!==(_slots$find=slots.find((slot=>slot.address===address)))&&void 0!==_slots$find?_slots$find:null}function filledSlots(slots){return slots.filter(isSlotFilled)}function emptySlots(slots){return slots.filter(isSlotEmpty)}function isSlotEmpty(slot){return 0===slot.samples.length}function isSlotFilled(slot){return!isSlotEmpty(slot)}function hasMultipleSamples(slot){return slot.samples.length>1}__webpack_require__.d(__webpack_exports__,{HQ:()=>maybeFindSlotByAddress,J1:()=>emptySlots,ZA:()=>findSlotByAddress,_h:()=>hasMultipleSamples,aD:()=>filledSlots,lA:()=>isSlotFilled,yr:()=>isSlotEmpty})}}]);