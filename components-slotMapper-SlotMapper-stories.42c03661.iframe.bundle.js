"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[987],{"./src/components/slotMapper/SlotMapper.stories.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:function(){return Default},__namedExportsOrder:function(){return __namedExportsOrder},default:function(){return SlotMapper_stories}});var SlotCopyMode,objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react=__webpack_require__("./node_modules/react/index.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),Labware=__webpack_require__("./src/components/labware/Labware.tsx"),Pager=__webpack_require__("./src/components/pagination/Pager.tsx");!function(SlotCopyMode){SlotCopyMode.ONE_TO_ONE="One to one",SlotCopyMode.ONE_TO_MANY="One to many",SlotCopyMode.MANY_TO_ONE="Many to one"}(SlotCopyMode||(SlotCopyMode={}));var hooks=__webpack_require__("./src/lib/hooks/index.ts"),WhiteButton=__webpack_require__("./src/components/buttons/WhiteButton.tsx"),LabwareScanner=__webpack_require__("./src/components/labwareScanner/LabwareScanner.tsx"),RemoveButton=__webpack_require__("./src/components/buttons/RemoveButton.tsx"),Table=__webpack_require__("./src/components/Table.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function SlotMapperTable(_ref){var labware=_ref.labware,slots=_ref.slots,slotCopyContent=_ref.slotCopyContent,mappingForSlots=react.useMemo((function(){var mappingsForInputSlots=[];slots.length>0?slots.forEach((function(slot){var mappings=slotCopyContent.filter((function(scc){return scc.sourceBarcode===labware.barcode&&scc.sourceAddress===slot.address}));mappings.length>0?mappings.forEach((function(scc){mappingsForInputSlots.push({slot:slot,destinationAddress:scc.destinationAddress})})):mappingsForInputSlots.push({slot:slot,destinationAddress:"-"})})):slotCopyContent.filter((function(scc){return scc.sourceBarcode===labware.barcode})).forEach((function(scc){var slot=labware.slots.find((function(slot){return slot.address===scc.sourceAddress}));slot&&mappingsForInputSlots.push({slot:slot,destinationAddress:scc.destinationAddress})}));return mappingsForInputSlots}),[labware,slots,slotCopyContent]);return(0,jsx_runtime.jsxs)(Table.ZP,{"data-testid":"mapping_table",children:[(0,jsx_runtime.jsx)(Table.ss,{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.xD,{children:"Source Barcode"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Source Address"}),(0,jsx_runtime.jsx)(Table.xD,{children:"External Name"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Spatial Location"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Tissue Type"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Replicate Number"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Sections Number(s)"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Destination Address"})]})}),(0,jsx_runtime.jsx)(Table.RM,{children:mappingForSlots.map((function(_ref2){var slot=_ref2.slot,destinationAddress=_ref2.destinationAddress;return(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.pj,{children:labware.barcode}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.address}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.samples.length>0?slot.samples[0].tissue.externalName:""}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.samples.length>0?slot.samples[0].tissue.spatialLocation.code:""}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.samples.length>0?slot.samples[0].tissue.spatialLocation.tissueType.name:""}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.samples.length>0?slot.samples[0].tissue.replicate:""}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.samples.map((function(sample){return sample.section})).join(",")}),(0,jsx_runtime.jsx)(Table.pj,{children:destinationAddress})]},"".concat(slot.address,"-").concat(slot.labwareId,"-").concat(destinationAddress))}))})]})}try{SlotMapperTable.displayName="SlotMapperTable",SlotMapperTable.__docgenInfo={description:"",displayName:"SlotMapperTable",props:{labware:{defaultValue:null,description:"",name:"labware",required:!0,type:{name:"LabwareFieldsFragment"}},slots:{defaultValue:null,description:"",name:"slots",required:!0,type:{name:"SlotFieldsFragment[]"}},slotCopyContent:{defaultValue:null,description:"",name:"slotCopyContent",required:!0,type:{name:"SlotCopyContent[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/slotMapper/SlotMapperTable.tsx#SlotMapperTable"]={docgenInfo:SlotMapperTable.__docgenInfo,name:"SlotMapperTable",path:"src/components/slotMapper/SlotMapperTable.tsx#SlotMapperTable"})}catch(__react_docgen_typescript_loader_error){}var classnames=__webpack_require__("./node_modules/classnames/index.js"),classnames_default=__webpack_require__.n(classnames),Heading=function Heading(_ref){var children=_ref.children,level=_ref.level,className=_ref.className,_ref$showBorder=_ref.showBorder,showBorder=void 0===_ref$showBorder||_ref$showBorder,HeadingTag="h".concat(level),headingClasses=classnames_default()({"text-3xl font-bold tracking-tight leading-loose":1===level,"text-2xl font-bold tracking-tight leading-relaxed":2===level,"text-xl font-bold tracking-tight leading-relaxed":3===level,"text-lg font-medium tracking-tight leading-relaxed":4===level,"border-b-2 border-sp":showBorder},className);return(0,jsx_runtime.jsx)(HeadingTag,{"data-testid":"heading",className:headingClasses,children:children})},components_Heading=Heading;try{Heading.displayName="Heading",Heading.__docgenInfo={description:"",displayName:"Heading",props:{level:{defaultValue:null,description:"",name:"level",required:!0,type:{name:"enum",value:[{value:"2"},{value:"1"},{value:"3"},{value:"4"}]}},showBorder:{defaultValue:{value:"true"},description:"",name:"showBorder",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/Heading.tsx#Heading"]={docgenInfo:Heading.__docgenInfo,name:"Heading",path:"src/components/Heading.tsx#Heading"})}catch(__react_docgen_typescript_loader_error){}var MutedText=__webpack_require__("./src/components/MutedText.tsx"),usePager=__webpack_require__("./src/lib/hooks/usePager.ts"),useMachine=__webpack_require__("./node_modules/@xstate/react/es/useMachine.js"),lodash=__webpack_require__("./node_modules/lodash/lodash.js"),ConfirmationModal=__webpack_require__("./src/components/modal/ConfirmationModal.tsx"),Warning=__webpack_require__("./src/components/notifications/Warning.tsx"),regeneratorRuntime=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js"),asyncToGenerator=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),Machine=__webpack_require__("./node_modules/xstate/es/Machine.js"),lib=__webpack_require__("./node_modules/@xstate/immer/lib/index.js"),sdk=__webpack_require__("./src/types/sdk.ts"),helpers=__webpack_require__("./src/lib/helpers.ts"),labwareHelper=__webpack_require__("./src/lib/helpers/labwareHelper.ts");var _passFailsSlots,lib_sdk=__webpack_require__("./src/lib/sdk.ts"),colors=(0,helpers.Tw)(),machineConfig={actions:{assignInputLabware:(0,lib.f0)((function(ctx,e){"UPDATE_INPUT_LABWARE"===e.type&&(ctx.inputLabware=e.labware);var keys=Array.from(ctx.failedSlots.keys()).filter((function(key){return-1===ctx.inputLabware.findIndex((function(labware){return labware.barcode===key}))}));keys.forEach((function(key){return ctx.failedSlots.delete(key)})),(keys=Array.from(ctx.errors.keys()).filter((function(key){return-1===ctx.inputLabware.findIndex((function(labware){return labware.barcode===key}))}))).forEach((function(key){return ctx.errors.delete(key)})),ctx.outputSlotCopies.forEach((function(outputScc){outputScc.slotCopyContent=outputScc.slotCopyContent.filter((function(scc){return ctx.inputLabware.some((function(lw){return lw.barcode===scc.sourceBarcode}))}))}))})),assignOutputLabware:(0,lib.f0)((function(ctx,e){"UPDATE_OUTPUT_LABWARE"===e.type&&(ctx.outputSlotCopies=e.outputSlotCopyContent)})),assignLabwareColors:(0,lib.f0)((function(ctx){ctx.inputLabware.forEach((function(lw){ctx.colorByBarcode.has(lw.barcode)||ctx.colorByBarcode.set(lw.barcode,colors.next().value)}))})),checkSlots:(0,lib.f0)((function(ctx){var inputLabwareBarcodes=(0,lodash.map)(ctx.inputLabware,"barcode");ctx.outputSlotCopies.forEach((function(outputScc){outputScc.slotCopyContent=outputScc.slotCopyContent.filter((function(scc){return inputLabwareBarcodes.includes(scc.sourceBarcode)}))}))})),clearSlots:(0,lib.f0)((function(ctx,e){if("CLEAR_SLOTS"===e.type){var outputScc=ctx.outputSlotCopies.find((function(outputScc){return outputScc.labware.id===e.outputLabwareId}));outputScc&&(outputScc.slotCopyContent=outputScc.slotCopyContent.filter((function(scc){return!e.outputAddresses.includes(scc.destinationAddress)})))}})),clearSlotMappingsBetween:(0,lib.f0)((function(ctx,e){if("CLEAR_ALL_SLOT_MAPPINGS_BETWEEN"===e.type){var outputScc=ctx.outputSlotCopies.find((function(outputScc){return outputScc.labware.id===e.outputLabwareId}));outputScc&&(outputScc.slotCopyContent=outputScc.slotCopyContent.filter((function(scc){return scc.sourceBarcode!==e.inputLabwareBarcode})))}})),copyOneToOneSlots:(0,lib.f0)((function(ctx,e){if("COPY_ONE_TO_ONE_SLOTS"===e.type){var inputLabware=(0,lodash.find)(ctx.inputLabware,{id:e.inputLabwareId}),outputScc=ctx.outputSlotCopies.find((function(outputScc){return outputScc.labware.id===e.outputLabwareId}));if(inputLabware&&outputScc){var outputAddresses=(0,helpers.Yh)(outputScc.labware.labwareType,sdk.mpV.DownRight),destinationAddressIndex=(0,lodash.indexOf)(outputAddresses,e.outputAddress);if(-1!==destinationAddressIndex){var sourceToDestination=function sortWithDirection(addresses,direction){var byColumnIndex=function byColumnIndex(address){return(0,labwareHelper.av)(address)},byRowIndex=function byRowIndex(address){return(0,labwareHelper.Xt)(address)},iteratees=direction===sdk.mpV.DownRight?[byColumnIndex,byRowIndex]:[byRowIndex,byColumnIndex];return(0,lodash.orderBy)(addresses,iteratees,["asc","asc"])}(e.inputAddresses,sdk.mpV.DownRight).reduce((function(memo,sourceAddress,index){return memo[sourceAddress]=outputAddresses[destinationAddressIndex+index],memo}),{});if(!((0,lodash.intersection)((0,lodash.map)(outputScc.slotCopyContent,"destinationAddress"),Object.values(sourceToDestination)).length>0||destinationAddressIndex+e.inputAddresses.length>outputAddresses.length)){var newSlotCopyContent=Object.entries(sourceToDestination).map((function(_ref){var _ref2=(0,slicedToArray.Z)(_ref,2);return{sourceAddress:_ref2[0],destinationAddress:_ref2[1],sourceBarcode:inputLabware.barcode}}));outputScc.slotCopyContent=outputScc.slotCopyContent.filter((function(scc){return!(scc.sourceBarcode===inputLabware.barcode&&e.inputAddresses.includes(scc.sourceAddress))})).concat(newSlotCopyContent)}}}}})),copyManyToOneSlots:(0,lib.f0)((function(ctx,e){if("COPY_MANY_TO_ONE_SLOTS"===e.type){var inputLabware=(0,lodash.find)(ctx.inputLabware,{id:e.inputLabwareId}),outputScc=ctx.outputSlotCopies.find((function(outputScc){return outputScc.labware.id===e.outputLabwareId}));if(inputLabware&&outputScc){var outputAddresses=(0,helpers.Yh)(outputScc.labware.labwareType,sdk.mpV.DownRight);-1!==(0,lodash.indexOf)(outputAddresses,e.outputAddress)&&(outputScc.slotCopyContent.find((function(scc){return scc.destinationAddress===e.outputAddress}))||e.inputAddresses.forEach((function(inputAddress){return outputScc.slotCopyContent.push({destinationAddress:e.outputAddress,sourceBarcode:inputLabware.barcode,sourceAddress:inputAddress})})))}}})),copyOneToManySlots:(0,lib.f0)((function(ctx,e){if("COPY_ONE_TO_MANY_SLOTS"===e.type){var inputLabware=(0,lodash.find)(ctx.inputLabware,{id:e.inputLabwareId}),outputScc=ctx.outputSlotCopies.find((function(outputScc){return outputScc.labware.id===e.outputLabwareId}));if(inputLabware&&outputScc){var outputAddresses=(0,helpers.Yh)(outputScc.labware.labwareType,sdk.mpV.DownRight);-1!==(0,lodash.indexOf)(outputAddresses,e.outputAddress)&&(outputScc.slotCopyContent.find((function(scc){return scc.destinationAddress===e.outputAddress}))||outputScc.slotCopyContent.push({destinationAddress:e.outputAddress,sourceBarcode:inputLabware.barcode,sourceAddress:e.inputAddress}))}}})),assignFailedSlots:(0,lib.f0)((function(ctx,e){if("done.invoke.passFailsSlots"===e.type&&e.data.result.passFails&&e.data.result.passFails.length>0){var slotPassFails=e.data.result.passFails[e.data.result.passFails.length-1].slotPassFails;if(slotPassFails){var failedAddresses=slotPassFails.filter((function(slotPassFail){return slotPassFail.result===sdk.h2w.Fail}));failedAddresses.length>0&&ctx.failedSlots.set(e.data.barcode,failedAddresses)}}})),assignPassFailError:(0,lib.f0)((function(ctx,e){"error.platform.passFailsSlots"===e.type&&ctx.errors.set(e.barcode,e.error)}))},services:{passFailsSlots:(_passFailsSlots=(0,asyncToGenerator.Z)((0,regeneratorRuntime.Z)().mark((function _callee(ctx,e){var response;return(0,regeneratorRuntime.Z)().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if("UPDATE_INPUT_LABWARE"===e.type){_context.next=2;break}return _context.abrupt("return",Promise.reject());case 2:if(!(e.labware.length<=0)){_context.next=4;break}return _context.abrupt("return",Promise.reject("No labwares scanned"));case 4:return _context.next=6,lib_sdk.dj.FindPassFails({barcode:e.labware[e.labware.length-1].barcode,operationType:"Slide processing"});case 6:return response=_context.sent,_context.abrupt("return",{barcode:e.labware[e.labware.length-1].barcode,result:response});case 8:case"end":return _context.stop()}}),_callee)}))),function passFailsSlots(_x,_x2){return _passFailsSlots.apply(this,arguments)})}};var slotMapper_machine=function createSlotMapperMachine(_ref3){var inputLabware=_ref3.inputLabware,outputSlotCopies=_ref3.outputSlotCopies,_ref3$failedSlotsChec=_ref3.failedSlotsCheck,failedSlotsCheck=void 0===_ref3$failedSlotsChec||_ref3$failedSlotsChec;return(0,Machine.J)({id:"slotMapperMachine",initial:"ready",context:{inputLabware:inputLabware,outputSlotCopies:outputSlotCopies,failedSlotsCheck:failedSlotsCheck,colorByBarcode:new Map,failedSlots:new Map,errors:new Map},states:{ready:{entry:"assignLabwareColors",on:{COPY_ONE_TO_ONE_SLOTS:{actions:"copyOneToOneSlots"},COPY_ONE_TO_MANY_SLOTS:{actions:"copyOneToManySlots"},COPY_MANY_TO_ONE_SLOTS:{actions:"copyManyToOneSlots"},CLEAR_SLOTS:{actions:"clearSlots"},CLEAR_ALL_SLOT_MAPPINGS_BETWEEN:{actions:"clearSlotMappingsBetween"},UPDATE_INPUT_LABWARE:[{target:"updatingLabware",cond:function cond(ctx){return ctx.failedSlotsCheck},actions:["assignInputLabware","assignLabwareColors","checkSlots"]},{actions:["assignInputLabware","assignLabwareColors","checkSlots"]}],UPDATE_OUTPUT_LABWARE:{actions:"assignOutputLabware"},LOCK:"locked"}},updatingLabware:{invoke:{src:"passFailsSlots",id:"passFailsSlots",onDone:{target:"ready",actions:"assignFailedSlots"},onError:{target:"ready",actions:"assignPassFailError"}}},locked:{on:{UNLOCK:"ready"}}}},machineConfig)},PinkButton=__webpack_require__("./src/components/buttons/PinkButton.tsx"),RadioGroup=__webpack_require__("./src/components/forms/RadioGroup.tsx"),_excluded=["currentPage","numberOfPages","setNumberOfPages","setCurrentPage","goToLastPage"],_excluded2=["currentPage","numberOfPages","setNumberOfPages","setCurrentPage","goToLastPage"],SlotMapper=function SlotMapper(_ref){var _currentOutput$slotCo,onChange=_ref.onChange,onInputLabwareChange=_ref.onInputLabwareChange,onOutputLabwareChange=_ref.onOutputLabwareChange,_ref$initialInputLabw=_ref.initialInputLabware,initialInputLabware=void 0===_ref$initialInputLabw?[]:_ref$initialInputLabw,_ref$initialOutputLab=_ref.initialOutputLabware,initialOutputLabware=void 0===_ref$initialOutputLab?[]:_ref$initialOutputLab,_ref$locked=_ref.locked,locked=void 0!==_ref$locked&&_ref$locked,inputLabwareLimit=_ref.inputLabwareLimit,_ref$failedSlotsCheck=_ref.failedSlotsCheck,failedSlotsCheck=void 0===_ref$failedSlotsCheck||_ref$failedSlotsCheck,_ref$disabledOutputSl=_ref.disabledOutputSlotAddresses,disabledOutputSlotAddresses=void 0===_ref$disabledOutputSl?[]:_ref$disabledOutputSl,slotCopyModes=_ref.slotCopyModes,inputLabwareConfigPanel=_ref.inputLabwareConfigPanel,outputLabwareConfigPanel=_ref.outputLabwareConfigPanel,onSelectInputLabware=_ref.onSelectInputLabware,onSelectOutputLabware=_ref.onSelectOutputLabware,_ref$displayMappedTab=_ref.displayMappedTable,displayMappedTable=void 0===_ref$displayMappedTab||_ref$displayMappedTab,memoSlotMapperMachine=react.useMemo((function(){return slotMapper_machine({inputLabware:[],outputSlotCopies:initialOutputLabware,failedSlotsCheck:failedSlotsCheck})}),[initialOutputLabware,failedSlotsCheck]),_useMachine=(0,useMachine.e)((function(){return memoSlotMapperMachine})),_useMachine2=(0,slicedToArray.Z)(_useMachine,2),current=_useMachine2[0],send=_useMachine2[1],_current$context=current.context,inputLabware=_current$context.inputLabware,outputSlotCopies=_current$context.outputSlotCopies,colorByBarcode=_current$context.colorByBarcode,failedSlots=_current$context.failedSlots,errors=_current$context.errors,_useState=(0,react.useState)((function(){return 0===(null==initialInputLabware?void 0:initialInputLabware.length)?null:initialInputLabware[0]})),_useState2=(0,slicedToArray.Z)(_useState,2),currentInputLabware=_useState2[0],setCurrentInputLabware=_useState2[1],_useState3=(0,react.useState)((function(){return 0===(null==initialOutputLabware?void 0:initialOutputLabware.length)?null:initialOutputLabware[0]})),_useState4=(0,slicedToArray.Z)(_useState3,2),currentOutput=_useState4[0],setCurrentOutput=_useState4[1],_useState5=(0,react.useState)([]),_useState6=(0,slicedToArray.Z)(_useState5,2),selectedInputAddresses=_useState6[0],setSelectedInputAddresses=_useState6[1],_useState7=(0,react.useState)([]),_useState8=(0,slicedToArray.Z)(_useState7,2),selectedOutputAddresses=_useState8[0],setSelectedOutputAddresses=_useState8[1],_useState9=(0,react.useState)([]),_useState10=(0,slicedToArray.Z)(_useState9,2),failedSelectSlots=_useState10[0],setFailedSelectSlots=_useState10[1],_useState11=(0,react.useState)(),_useState12=(0,slicedToArray.Z)(_useState11,2),destinationAddress=_useState12[0],setDestinationAddress=_useState12[1],_useState13=(0,react.useState)(SlotCopyMode.ONE_TO_ONE),_useState14=(0,slicedToArray.Z)(_useState13,2),selectedCopyMode=_useState14[0],setSelectedCopyMode=_useState14[1],_useState15=(0,react.useState)(!1),_useState16=(0,slicedToArray.Z)(_useState15,2),oneToManyCopyInProgress=_useState16[0],setOneToManyCopyInProgress=_useState16[1],_usePager=(0,usePager.Y)({initialCurrentPage:1,initialNumberOfPages:inputLabware.length}),currentInputPage=_usePager.currentPage,numberOfInputPages=_usePager.numberOfPages,setNumberOfInputPages=_usePager.setNumberOfPages,goToLastInputPage=(_usePager.setCurrentPage,_usePager.goToLastPage),pagerRestInput=(0,objectWithoutProperties.Z)(_usePager,_excluded),_usePager2=(0,usePager.Y)({initialCurrentPage:1,initialNumberOfPages:outputSlotCopies.length}),currentOutputPage=_usePager2.currentPage,numberOfOutputPages=_usePager2.numberOfPages,setNumberOfOutputPages=_usePager2.setNumberOfPages,goToLastOutputPage=(_usePager2.setCurrentPage,_usePager2.goToLastPage),pageRestOutput=(0,objectWithoutProperties.Z)(_usePager2,_excluded2),anySourceMapped=(0,react.useMemo)((function(){return 0!==inputLabware.length&&(!!currentOutput&&currentOutput.slotCopyContent.length>0)}),[currentOutput,inputLabware]),memoInputAddressesDisabled=react.useMemo((function(){return currentOutput&&currentInputLabware?outputSlotCopies.filter((function(osc){return osc.labware.id!==currentOutput.labware.id})).flatMap((function(item){return item.slotCopyContent})).filter((function(scc){return scc.sourceBarcode===currentInputLabware.barcode})).map((function(slot){return slot.sourceAddress})):[]}),[currentOutput,currentInputLabware,outputSlotCopies]);(0,react.useEffect)((function(){var matchingLabware=null==initialOutputLabware?void 0:initialOutputLabware.find((function(outputLw){return outputLw.labware.id===(null==currentOutput?void 0:currentOutput.labware.id)}));matchingLabware&&matchingLabware.labware.barcode!==(null==currentOutput?void 0:currentOutput.labware.barcode)&&setCurrentOutput((function(prev){return prev&&prev.labware.barcode!==matchingLabware.labware.barcode?(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{labware:(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev.labware),{},{barcode:matchingLabware.labware.barcode})}):prev})),initialOutputLabware.some((function(lw){return!outputSlotCopies.map((function(osc){return osc.labware.id})).includes(lw.labware.id)}))&&send({type:"UPDATE_OUTPUT_LABWARE",outputSlotCopyContent:initialOutputLabware})}),[initialOutputLabware,outputSlotCopies,send,null==currentOutput?void 0:currentOutput.labware]);var getSourceSlotColor=(0,react.useCallback)((function(labware,address,slot){var _slot$samples;return currentOutput?selectedCopyMode===SlotCopyMode.ONE_TO_MANY&&oneToManyCopyInProgress&&selectedInputAddresses[0]===address?"bg-".concat(colorByBarcode.get(labware.barcode),"-500 ring ring-pink-600 ring-offset-2"):(0,lodash.find)(currentOutput.slotCopyContent,{sourceBarcode:labware.barcode,sourceAddress:address})?"bg-".concat(colorByBarcode.get(labware.barcode),"-200 ").concat(selectedInputAddresses.includes(address)?"ring ring-blue-600 ring-offset-2":""):memoInputAddressesDisabled.includes(address)?"bg-gray-300 ring-0 ring-offset-0 text-white border-0 border-gray-300":null!=slot&&null!==(_slot$samples=slot.samples)&&void 0!==_slot$samples&&_slot$samples.length?"bg-".concat(colorByBarcode.get(labware.barcode),"-500"):void 0:"bg-white"}),[currentOutput,colorByBarcode,memoInputAddressesDisabled,selectedCopyMode,selectedInputAddresses,oneToManyCopyInProgress]),getDestinationSlotColor=(0,react.useCallback)((function(outputSlotCopyData,address){if(null!=disabledOutputSlotAddresses&&disabledOutputSlotAddresses.includes(address))return"bg-gray-300 ring-0 ring-offset-0 text-gray-300 border-0 border-gray-300";var scc=(0,lodash.find)(outputSlotCopyData.slotCopyContent,{destinationAddress:address});return scc?currentInputLabware&&currentInputLabware.barcode===scc.sourceBarcode&&selectedInputAddresses.includes(scc.sourceAddress)&&!oneToManyCopyInProgress?"bg-".concat(colorByBarcode.get(scc.sourceBarcode),"-500 ring ring-blue-600 ring-offset-2"):"bg-".concat(colorByBarcode.get(scc.sourceBarcode),"-500"):void 0}),[colorByBarcode,disabledOutputSlotAddresses,oneToManyCopyInProgress,selectedInputAddresses,currentInputLabware]);(0,react.useEffect)((function(){setNumberOfInputPages(inputLabware.length)}),[inputLabware,setNumberOfInputPages]);var previousInputLength=(0,hooks.D9)(inputLabware.length);(0,react.useEffect)((function(){previousInputLength&&inputLabware.length>previousInputLength&&goToLastInputPage()}),[inputLabware.length,goToLastInputPage,previousInputLength]),(0,react.useEffect)((function(){0===inputLabware.length||currentInputPage<=0||inputLabware.length<=currentInputPage-1||(setCurrentInputLabware(inputLabware[currentInputPage-1]),null==onSelectInputLabware||onSelectInputLabware(inputLabware[currentInputPage-1]))}),[currentInputPage,inputLabware,onSelectInputLabware,setCurrentInputLabware]);var numberOfOutputLabware=outputSlotCopies.length;(0,react.useEffect)((function(){setNumberOfOutputPages(numberOfOutputLabware)}),[numberOfOutputLabware,setNumberOfOutputPages]);var previousOutputLength=(0,hooks.D9)(outputSlotCopies.length);(0,react.useEffect)((function(){previousOutputLength&&outputSlotCopies.length>previousOutputLength&&goToLastOutputPage()}),[outputSlotCopies.length,goToLastOutputPage,previousOutputLength]),(0,react.useEffect)((function(){0===outputSlotCopies.length||currentOutputPage<=0||outputSlotCopies.length<=currentOutputPage-1||(setCurrentOutput(outputSlotCopies[currentOutputPage-1]),null==onSelectOutputLabware||onSelectOutputLabware(outputSlotCopies[currentOutputPage-1].labware))}),[currentOutputPage,outputSlotCopies,onSelectOutputLabware,setCurrentOutput]),(0,react.useEffect)((function(){setSelectedInputAddresses([])}),[currentInputLabware]),(0,react.useEffect)((function(){send(locked?{type:"LOCK"}:{type:"UNLOCK"})}),[locked,send]);var inputLabwareRef=(0,react.useRef)(null),outputLabwareRef=(0,react.useRef)(null),handleCopySlots=react.useCallback((function(givenDestinationAddress){var _currentOutput$labwar;setFailedSelectSlots([]);var _currentOutput$labwar2,address=destinationAddress||givenDestinationAddress;null!=currentInputLabware&&currentInputLabware.id&&null!=currentOutput&&null!==(_currentOutput$labwar=currentOutput.labware)&&void 0!==_currentOutput$labwar&&_currentOutput$labwar.id&&address&&send({type:"COPY_ONE_TO_ONE_SLOTS",inputLabwareId:null==currentInputLabware?void 0:currentInputLabware.id,inputAddresses:selectedInputAddresses,outputLabwareId:null==currentOutput||null===(_currentOutput$labwar2=currentOutput.labware)||void 0===_currentOutput$labwar2?void 0:_currentOutput$labwar2.id,outputAddress:address});setDestinationAddress(void 0)}),[currentInputLabware,currentOutput,destinationAddress,selectedInputAddresses,send]),handleOneToOneCopy=react.useCallback((function(outputAddress){if((null==disabledOutputSlotAddresses||!disabledOutputSlotAddresses.includes(outputAddress))&&(setDestinationAddress(outputAddress),currentInputLabware)){var slotFails=failedSlots.get(currentInputLabware.barcode);if(!slotFails)return void handleCopySlots(outputAddress);var _failedSelectSlots=slotFails.filter((function(slot){return-1!==selectedInputAddresses.findIndex((function(address){return address===slot.address}))}));if(setFailedSelectSlots(_failedSelectSlots),0===_failedSelectSlots.length)return void handleCopySlots(outputAddress)}}),[currentInputLabware,handleCopySlots,failedSlots,selectedInputAddresses,disabledOutputSlotAddresses]),handleOneToManyCopy=react.useCallback((function(outputAddress){var _currentOutput$labwar3;if((null==disabledOutputSlotAddresses||!disabledOutputSlotAddresses.includes(outputAddress))&&oneToManyCopyInProgress){setDestinationAddress(outputAddress),setFailedSelectSlots([]);var _currentOutput$labwar4,address=destinationAddress||outputAddress;if(null!=currentInputLabware&&currentInputLabware.id&&null!=currentOutput&&null!==(_currentOutput$labwar3=currentOutput.labware)&&void 0!==_currentOutput$labwar3&&_currentOutput$labwar3.id&&address)send({type:"COPY_ONE_TO_MANY_SLOTS",inputLabwareId:null==currentInputLabware?void 0:currentInputLabware.id,inputAddress:selectedInputAddresses[0],outputLabwareId:null==currentOutput||null===(_currentOutput$labwar4=currentOutput.labware)||void 0===_currentOutput$labwar4?void 0:_currentOutput$labwar4.id,outputAddress:address});setDestinationAddress(void 0)}}),[setDestinationAddress,destinationAddress,oneToManyCopyInProgress,send,currentInputLabware,currentOutput,disabledOutputSlotAddresses,selectedInputAddresses]),handleManyToOneCopy=react.useCallback((function(outputAddress){var _currentOutput$labwar5;if(null==disabledOutputSlotAddresses||!disabledOutputSlotAddresses.includes(outputAddress)){setDestinationAddress(outputAddress),setFailedSelectSlots([]);var _currentOutput$labwar6,address=destinationAddress||outputAddress;if(null!=currentInputLabware&&currentInputLabware.id&&null!=currentOutput&&null!==(_currentOutput$labwar5=currentOutput.labware)&&void 0!==_currentOutput$labwar5&&_currentOutput$labwar5.id&&address)send({type:"COPY_MANY_TO_ONE_SLOTS",inputLabwareId:null==currentInputLabware?void 0:currentInputLabware.id,inputAddresses:selectedInputAddresses,outputLabwareId:null==currentOutput||null===(_currentOutput$labwar6=currentOutput.labware)||void 0===_currentOutput$labwar6?void 0:_currentOutput$labwar6.id,outputAddress:address});setDestinationAddress(void 0)}}),[setDestinationAddress,destinationAddress,send,currentInputLabware,currentOutput,disabledOutputSlotAddresses,selectedInputAddresses]),handleOnOutputLabwareSlotClick=react.useCallback((function(outputAddress){switch(selectedCopyMode){case SlotCopyMode.ONE_TO_ONE:handleOneToOneCopy(outputAddress);break;case SlotCopyMode.ONE_TO_MANY:handleOneToManyCopy(outputAddress);break;case SlotCopyMode.MANY_TO_ONE:handleManyToOneCopy(outputAddress)}}),[handleOneToOneCopy,handleManyToOneCopy,handleOneToManyCopy,selectedCopyMode]),handleOnInputLabwareSlotClick=react.useCallback((function(inputAddress){if(selectedCopyMode===SlotCopyMode.ONE_TO_MANY){if(oneToManyCopyInProgress)return;if(0===inputAddress.length)return void setSelectedInputAddresses([]);(0,lodash.find)(null==currentOutput?void 0:currentOutput.slotCopyContent,{sourceBarcode:null==currentInputLabware?void 0:currentInputLabware.barcode,sourceAddress:inputAddress[0]})||setOneToManyCopyInProgress(!0)}setSelectedInputAddresses(inputAddress.filter((function(address){return!memoInputAddressesDisabled.includes(address)})))}),[setSelectedInputAddresses,memoInputAddressesDisabled,setOneToManyCopyInProgress,selectedCopyMode,null==currentInputLabware?void 0:currentInputLabware.barcode,null==currentOutput?void 0:currentOutput.slotCopyContent,oneToManyCopyInProgress]),handleOnClickClear=react.useCallback((function(){var _currentOutput$labwar7,_currentOutput$labwar8,_outputLabwareRef$cur;null!=currentOutput&&null!==(_currentOutput$labwar7=currentOutput.labware)&&void 0!==_currentOutput$labwar7&&_currentOutput$labwar7.id&&(send({type:"CLEAR_SLOTS",outputLabwareId:null==currentOutput||null===(_currentOutput$labwar8=currentOutput.labware)||void 0===_currentOutput$labwar8?void 0:_currentOutput$labwar8.id,outputAddresses:selectedOutputAddresses}),null===(_outputLabwareRef$cur=outputLabwareRef.current)||void 0===_outputLabwareRef$cur||_outputLabwareRef$cur.deselectAll())}),[send,currentOutput,selectedOutputAddresses,outputLabwareRef]),handleOnClickClearAll=react.useCallback((function(){var _currentOutput$labwar9,_currentOutput$labwar10,_outputLabwareRef$cur2;null!=currentOutput&&null!==(_currentOutput$labwar9=currentOutput.labware)&&void 0!==_currentOutput$labwar9&&_currentOutput$labwar9.id&&null!=currentInputLabware&&currentInputLabware.barcode&&(send({type:"CLEAR_ALL_SLOT_MAPPINGS_BETWEEN",outputLabwareId:null==currentOutput||null===(_currentOutput$labwar10=currentOutput.labware)||void 0===_currentOutput$labwar10?void 0:_currentOutput$labwar10.id,inputLabwareBarcode:null==currentInputLabware?void 0:currentInputLabware.barcode}),null===(_outputLabwareRef$cur2=outputLabwareRef.current)||void 0===_outputLabwareRef$cur2||_outputLabwareRef$cur2.deselectAll())}),[send,currentOutput,currentInputLabware,outputLabwareRef]);(0,react.useEffect)((function(){var _inputLabwareRef$curr;null===(_inputLabwareRef$curr=inputLabwareRef.current)||void 0===_inputLabwareRef$curr||_inputLabwareRef$curr.deselectAll()}),[null==currentOutput?void 0:currentOutput.slotCopyContent,currentInputLabware]),(0,react.useEffect)((function(){var _outputLabwareRef$cur3;null===(_outputLabwareRef$cur3=outputLabwareRef.current)||void 0===_outputLabwareRef$cur3||_outputLabwareRef$cur3.deselectAll()}),[null==currentOutput?void 0:currentOutput.slotCopyContent,currentInputLabware]),(0,react.useEffect)((function(){null!=currentOutput&&currentOutput.slotCopyContent&&(null==onChange||onChange(currentOutput.labware,null==currentOutput?void 0:currentOutput.slotCopyContent,anySourceMapped))}),[onChange,currentOutput,anySourceMapped]);var onLabwareScannerChange=react.useCallback((function(labware){send({type:"UPDATE_INPUT_LABWARE",labware:labware}),null==onInputLabwareChange||onInputLabwareChange(labware)}),[send,onInputLabwareChange]),onRemoveOutputLabware=react.useCallback((function(){var outputs=outputSlotCopies.filter((function(osc){return osc.labware.id!==(null==currentOutput?void 0:currentOutput.labware.id)}));send({type:"UPDATE_OUTPUT_LABWARE",outputSlotCopyContent:outputs}),null==onOutputLabwareChange||onOutputLabwareChange(outputs.map((function(o){return o.labware})))}),[send,onOutputLabwareChange,currentOutput,outputSlotCopies]),selectedInputSlots=currentInputLabware?currentInputLabware.slots.filter((function(slot){return-1!==selectedInputAddresses.findIndex((function(selectedAddress){return selectedAddress===slot.address}))})):[],slotsMappedForCurrentInput=null==currentOutput?void 0:currentOutput.slotCopyContent.some((function(slotCopy){return slotCopy.sourceBarcode===(null==currentInputLabware?void 0:currentInputLabware.barcode)})),handleCopyModeChange=react.useCallback((function(mode){setSelectedCopyMode(mode),setOneToManyCopyInProgress(!1)}),[setSelectedCopyMode,setOneToManyCopyInProgress]),onFinishTransferButtonClick=react.useCallback((function(){setOneToManyCopyInProgress(!1),setSelectedInputAddresses([]),setSelectedOutputAddresses([])}),[setOneToManyCopyInProgress,setSelectedOutputAddresses,setSelectedInputAddresses]);return(0,jsx_runtime.jsxs)("div",{className:"space-y-8",children:[(0,jsx_runtime.jsxs)("div",{className:"grid grid-cols-2 auto-rows-auto",children:[(0,jsx_runtime.jsx)(components_Heading,{level:4,children:"Input Labwares"}),(0,jsx_runtime.jsx)(components_Heading,{level:4,children:"Output Labwares"}),slotCopyModes&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"flex flex-row p-4 space-x-4",children:(0,jsx_runtime.jsx)(RadioGroup.ZP,{label:"Select transfer mode",name:"sectionNumber",withFormik:!1,children:slotCopyModes.map((function(mode){return(0,jsx_runtime.jsx)(RadioGroup.pn,{"data-testid":"copyMode-".concat(mode),name:"copyMode",value:mode,checked:selectedCopyMode===mode,onChange:function onChange(){return handleCopyModeChange(mode)},label:mode},mode)}))})}),(0,jsx_runtime.jsx)("div",{})]}),(0,jsx_runtime.jsx)("div",{id:"inputLabwares",className:"bg-gray-100 p-4",children:(0,jsx_runtime.jsx)(LabwareScanner.Z,{initialLabwares:inputLabware,onChange:onLabwareScannerChange,limit:inputLabwareLimit,children:function children(props){return currentInputLabware?(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"flex mb-8",children:inputLabwareConfigPanel}),!locked&&inputLabware.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex flex-row justify-end",children:(0,jsx_runtime.jsx)(RemoveButton.Z,{onClick:function onClick(){props.removeLabware(currentInputLabware.barcode),null==onInputLabwareChange||onInputLabwareChange(inputLabware)}})}),inputLabware.length>0&&(0,jsx_runtime.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,jsx_runtime.jsx)(Labware.Z,{labware:currentInputLabware,selectable:oneToManyCopyInProgress?"none":"non_empty",selectionMode:selectedCopyMode!==SlotCopyMode.ONE_TO_MANY?"multi":"single",labwareRef:inputLabwareRef,slotColor:function slotColor(address,slot){return getSourceSlotColor(currentInputLabware,address,slot)},name:currentInputLabware.labwareType.name,onSelect:handleOnInputLabwareSlotClick})})]}):(0,jsx_runtime.jsx)(MutedText.Z,{children:"Add labware using the scan input above"})}})}),(0,jsx_runtime.jsxs)("div",{id:"outputLabwares",className:"p-4 flex flex-col  bg-gray-100 border-l-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex mb-8",children:outputLabwareConfigPanel}),(null==initialOutputLabware?void 0:initialOutputLabware.length)>1&&(0,jsx_runtime.jsx)("div",{className:"flex flex-row justify-end",children:(0,jsx_runtime.jsx)(RemoveButton.Z,{onClick:function onClick(){onRemoveOutputLabware()}})}),(0,jsx_runtime.jsx)("div",{className:"flex items-center justify-center",children:(null==currentOutput?void 0:currentOutput.labware)&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,jsx_runtime.jsx)("div",{className:"flex justify-end",children:oneToManyCopyInProgress&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-col items-end",children:[(0,jsx_runtime.jsx)(PinkButton.Z,{onClick:onFinishTransferButtonClick,children:"Finish mapping for ".concat(selectedInputAddresses[0])}),(0,jsx_runtime.jsx)(MutedText.Z,{children:"Press when you finish"})]})}),(0,jsx_runtime.jsx)(Labware.Z,{labware:currentOutput.labware,selectable:"any",selectionMode:"multi",labwareRef:outputLabwareRef,name:null==currentOutput?void 0:currentOutput.labware.labwareType.name,onSlotClick:handleOnOutputLabwareSlotClick,onSelect:setSelectedOutputAddresses,slotColor:function slotColor(address){return getDestinationSlotColor(currentOutput,address)}})]})})]}),(0,jsx_runtime.jsx)("div",{className:"border-gray-300 border-t-2 p-4 flex flex-row items-center justify-between bg-gray-200",children:inputLabware.length>0&&(0,jsx_runtime.jsx)(Pager.Z,(0,objectSpread2.Z)({currentPage:currentInputPage,numberOfPages:numberOfInputPages},pagerRestInput))}),(0,jsx_runtime.jsxs)("div",{className:"border-gray-300 border-t-2 p-4 flex flex-row items-center justify-between bg-gray-200",children:[(0,jsx_runtime.jsx)("div",{children:outputSlotCopies.length>0&&(0,jsx_runtime.jsx)(Pager.Z,(0,objectSpread2.Z)({currentPage:currentOutputPage,numberOfPages:numberOfOutputPages},pageRestOutput))}),(0,jsx_runtime.jsx)("div",{className:"border-gray-300 flex-row items-center justify-end bg-gray-200",children:!locked&&(0,jsx_runtime.jsxs)("div",{className:"flex flex-row space-x-4 justify-end",children:[(0,jsx_runtime.jsx)(WhiteButton.Z,{onClick:handleOnClickClear,children:"Clear"}),(0,jsx_runtime.jsx)(WhiteButton.Z,{"data-testid":"clearAll",onClick:handleOnClickClearAll,children:"Clear all"})]})})]})]}),currentInputLabware&&(selectedInputSlots.length>0||currentOutput&&slotsMappedForCurrentInput&&displayMappedTable)&&(0,jsx_runtime.jsxs)("div",{className:"space-y-4",children:[(0,jsx_runtime.jsx)(components_Heading,{level:4,children:selectedInputSlots.length>0?"Slot mapping for slot(s) ".concat(selectedInputAddresses.join(",")):"Slot mapping for ".concat(currentInputLabware.barcode)}),(0,jsx_runtime.jsx)(SlotMapperTable,{labware:currentInputLabware,slots:selectedInputSlots,slotCopyContent:null!==(_currentOutput$slotCo=null==currentOutput?void 0:currentOutput.slotCopyContent)&&void 0!==_currentOutput$slotCo?_currentOutput$slotCo:[]})]}),(0,jsx_runtime.jsxs)(ConfirmationModal.c,{show:failedSelectSlots.length>0,header:"Slot transfer",message:{type:"Warning",text:"Failed slot(s)"},confirmOptions:[{label:"Cancel",action:function action(){setFailedSelectSlots([])}},{label:"Continue",action:handleCopySlots}],children:[(0,jsx_runtime.jsx)("p",{className:"font-bold mt-8",children:"Following slot(s) failed in slide processing : "}),(0,jsx_runtime.jsxs)(Table.ZP,{className:"mt-4 w-full",children:[(0,jsx_runtime.jsx)(Table.ss,{children:(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.xD,{children:"Address"}),(0,jsx_runtime.jsx)(Table.xD,{children:"Comment"})]})}),(0,jsx_runtime.jsx)(Table.RM,{children:failedSelectSlots.map((function(slot){return(0,jsx_runtime.jsxs)("tr",{children:[(0,jsx_runtime.jsx)(Table.pj,{children:slot.address}),(0,jsx_runtime.jsx)(Table.pj,{children:slot.comment})]},slot.address)}))})]}),(0,jsx_runtime.jsx)("p",{className:"mt-6 font-bold",children:"Do you wish to continue or cancel?"})]}),(0,jsx_runtime.jsx)("div",{className:"flex flex-col w-full",children:errors.size>0&&(0,jsx_runtime.jsx)(Warning.Z,{message:"There is an error while fetching pass/fail status for the slots in ".concat(null==currentInputLabware?void 0:currentInputLabware.barcode,".")})})]})},slotMapper_SlotMapper=SlotMapper;try{SlotMapper.displayName="SlotMapper",SlotMapper.__docgenInfo={description:"",displayName:"SlotMapper",props:{onChange:{defaultValue:null,description:"Callback that's called whenever a slot is mapped or unmapped\n@param slotCopyContent the current mapping of source to destination slots\n@param allSourcesMapped true if input labware exists and their non-empty slots have been mapped, false otherwise",name:"onChange",required:!1,type:{name:"((labware: NewLabwareLayout, slotCopyContent: SlotCopyContent[], allSourcesMapped: boolean) => void)"}},onInputLabwareChange:{defaultValue:null,description:"Callback to notify whenever an input labware is scanned/removed",name:"onInputLabwareChange",required:!1,type:{name:"((labwaresWithoutPerm: LabwareFieldsFragment[]) => void)"}},onOutputLabwareChange:{defaultValue:null,description:"Callback to notify whenever an output labware is removed",name:"onOutputLabwareChange",required:!1,type:{name:"((labwaresWithoutPerm: NewLabwareLayout[]) => void)"}},locked:{defaultValue:{value:"false"},description:"Lock the SlotMapper.",name:"locked",required:!1,type:{name:"boolean"}},initialInputLabware:{defaultValue:{value:"[]"},description:"Input labware",name:"initialInputLabware",required:!1,type:{name:"LabwareFieldsFragment[]"}},initialOutputLabware:{defaultValue:{value:"[]"},description:"Output labware",name:"initialOutputLabware",required:!1,type:{name:"OutputSlotCopyData[]"}},failedSlotsCheck:{defaultValue:{value:"true"},description:"Is it required to check failed slots in slide processing",name:"failedSlotsCheck",required:!1,type:{name:"boolean"}},inputLabwareLimit:{defaultValue:null,description:"Maximum number of input labware allowed to scan, if required",name:"inputLabwareLimit",required:!1,type:{name:"number"}},disabledOutputSlotAddresses:{defaultValue:{value:"[]"},description:"Disabled slots in output labware , if any",name:"disabledOutputSlotAddresses",required:!1,type:{name:"string[]"}},inputLabwareConfigPanel:{defaultValue:null,description:"Panel to display on top of input labware, if any*",name:"inputLabwareConfigPanel",required:!1,type:{name:"ReactNode"}},outputLabwareConfigPanel:{defaultValue:null,description:"Panel to display on top of output labware, if any*",name:"outputLabwareConfigPanel",required:!1,type:{name:"ReactNode"}},slotCopyModes:{defaultValue:null,description:"Slot copy modes*",name:"slotCopyModes",required:!1,type:{name:"SlotCopyMode[]"}},displayMappedTable:{defaultValue:{value:"true"},description:"Display mapping table*",name:"displayMappedTable",required:!1,type:{name:"boolean"}},onSelectOutputLabware:{defaultValue:null,description:"Callback to notify when an output labware is selected (through pagination)*",name:"onSelectOutputLabware",required:!1,type:{name:"((labware: NewLabwareLayout) => void)"}},onSelectInputLabware:{defaultValue:null,description:"Callback to notify when an output labware is selected (through pagination)*",name:"onSelectInputLabware",required:!1,type:{name:"((labware: LabwareFieldsFragment) => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/slotMapper/SlotMapper.tsx#SlotMapper"]={docgenInfo:SlotMapper.__docgenInfo,name:"SlotMapper",path:"src/components/slotMapper/SlotMapper.tsx#SlotMapper"})}catch(__react_docgen_typescript_loader_error){}var labwareFactory=__webpack_require__("./src/lib/factories/labwareFactory.ts"),labwareTypeFactory=__webpack_require__("./src/lib/factories/labwareTypeFactory.ts"),stan=__webpack_require__("./src/types/stan.ts"),SlotMapper_stories={title:"Slot Mapper",component:slotMapper_SlotMapper},Default=function Template(args){return(0,jsx_runtime.jsx)(slotMapper_SlotMapper,(0,objectSpread2.Z)({},args))}.bind({});Default.args={initialInputLabware:labwareFactory.ZP.buildList(3,void 0,{associations:{labwareType:labwareTypeFactory.kK[stan.Cn.VISIUM_LP].build()}}),initialOutputLabware:[{labware:labwareFactory.Ai.build(),slotCopyContent:[]}]},Default.parameters=(0,objectSpread2.Z)({storySource:{source:"(args) => <SlotMapper {...args} />"}},Default.parameters);var __namedExportsOrder=["Default"];try{Meta.displayName="Meta",Meta.__docgenInfo={description:"Metadata to configure the stories for a component.",displayName:"Meta",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/slotMapper/SlotMapper.stories.tsx#Meta"]={docgenInfo:Meta.__docgenInfo,name:"Meta",path:"src/components/slotMapper/SlotMapper.stories.tsx#Meta"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/buttons/PinkButton.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){var _home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),_Button__WEBPACK_IMPORTED_MODULE_1__=(__webpack_require__("./node_modules/react/index.js"),__webpack_require__("./src/components/buttons/Button.tsx")),classnames__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/classnames/index.js"),classnames__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(classnames__WEBPACK_IMPORTED_MODULE_2__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["children","className","action"],PinkButton=function PinkButton(_ref){var children=_ref.children,className=_ref.className,_ref$action=_ref.action,action=void 0===_ref$action?"primary":_ref$action,rest=(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectWithoutProperties_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_ref,_excluded),buttonClasses=classnames__WEBPACK_IMPORTED_MODULE_2___default()({"text-white bg-sp hover:bg-sp-600 shadow-sm focus:border-sp-700 focus:shadow-outline-sp active:bg-sp-700":"primary"===action,"text-sp bg-transparent border border-sp shadow-sm hover:bg-sp-100 focus:border-sp-400 focus:shadow-outline-sp active:bg-sp-200":"secondary"===action,"text-sp bg-transparent hover:text-sp-700 active:text-sp-800":"tertiary"===action},className);return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_Button__WEBPACK_IMPORTED_MODULE_1__.Z,(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_5__.Z)({},rest),{},{className:buttonClasses,children:children}))};__webpack_exports__.Z=PinkButton;try{PinkButton.displayName="PinkButton",PinkButton.__docgenInfo={description:"",displayName:"PinkButton",props:{loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean"}},action:{defaultValue:{value:"primary"},description:"",name:"action",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"tertiary"'}]}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/buttons/PinkButton.tsx#PinkButton"]={docgenInfo:PinkButton.__docgenInfo,name:"PinkButton",path:"src/components/buttons/PinkButton.tsx#PinkButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/modal/ConfirmationModal.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{c:function(){return ConfirmationModal}});__webpack_require__("./node_modules/react/index.js");var _Modal__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/Modal.tsx"),_notifications_Success__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/components/notifications/Success.tsx"),_buttons_WhiteButton__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/components/buttons/WhiteButton.tsx"),_notifications_Warning__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/components/notifications/Warning.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/react/jsx-runtime.js"),ConfirmationModal=function ConfirmationModal(_ref){var show=_ref.show,header=_ref.header,message=_ref.message,confirmOptions=_ref.confirmOptions,children=_ref.children;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_Modal__WEBPACK_IMPORTED_MODULE_1__.ZP,{show:show,children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_1__.xB,{children:header}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsxs)(_Modal__WEBPACK_IMPORTED_MODULE_1__.fe,{children:[message&&"Success"===message.type&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_notifications_Success__WEBPACK_IMPORTED_MODULE_2__.Z,{message:message.text}),message&&"Warning"===message.type&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_notifications_Warning__WEBPACK_IMPORTED_MODULE_4__.Z,{message:message.text}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)("div",{className:"my-4",children:children})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_Modal__WEBPACK_IMPORTED_MODULE_1__.mz,{children:confirmOptions.map((function(option){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_5__.jsx)(_buttons_WhiteButton__WEBPACK_IMPORTED_MODULE_3__.Z,{type:"button",onClick:option.action,className:"w-full text-base sm:ml-3 sm:w-auto sm:text-sm",children:option.label},option.label)}))})]})};try{ConfirmationModal.displayName="ConfirmationModal",ConfirmationModal.__docgenInfo={description:"",displayName:"ConfirmationModal",props:{header:{defaultValue:null,description:"Header text",name:"header",required:!0,type:{name:"string"}},show:{defaultValue:null,description:"Should this modal be showing",name:"show",required:!0,type:{name:"boolean"}},children:{defaultValue:null,description:"Children to be displayed in the modal",name:"children",required:!0,type:{name:"ReactNode"}},message:{defaultValue:null,description:"Message to display",name:"message",required:!1,type:{name:'{ type: "Warning" | "Success"; text: string; }'}},confirmOptions:{defaultValue:null,description:"Labels and action handlers for different options to display",name:"confirmOptions",required:!0,type:{name:"{ label: string; action: () => void; }[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/modal/ConfirmationModal.tsx#ConfirmationModal"]={docgenInfo:ConfirmationModal.__docgenInfo,name:"ConfirmationModal",path:"src/components/modal/ConfirmationModal.tsx#ConfirmationModal"})}catch(__react_docgen_typescript_loader_error){}},"./src/components/pagination/Pager.tsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__("./node_modules/react/index.js");var _buttons_IconButton__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/components/buttons/IconButton.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react/jsx-runtime.js");function Pager(_ref){var currentPage=_ref.currentPage,numberOfPages=_ref.numberOfPages,pageDownDisabled=_ref.pageDownDisabled,pageUpDisabled=_ref.pageUpDisabled,onPageDownClick=_ref.onPageDownClick,onPageUpClick=_ref.onPageUpClick;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{className:"flex flex-row items-center gap-6 text-sm text-gray-700",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_buttons_IconButton__WEBPACK_IMPORTED_MODULE_1__.Z,{disabled:pageDownDisabled,dataTestId:"left-button",onClick:onPageDownClick,children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsxs)("div",{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"font-medium",children:currentPage})," of ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("span",{className:"font-medium",children:numberOfPages})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(_buttons_IconButton__WEBPACK_IMPORTED_MODULE_1__.Z,{disabled:pageUpDisabled,onClick:onPageUpClick,dataTestId:"right-button",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})})]})}__webpack_exports__.Z=Pager;try{Pager.displayName="Pager",Pager.__docgenInfo={description:"A pager shows how many pages are available, and allows navigation between those pages.\n\nWorks well with the {@link usePager } hook.",displayName:"Pager",props:{currentPage:{defaultValue:null,description:"The current page",name:"currentPage",required:!0,type:{name:"number"}},numberOfPages:{defaultValue:null,description:"How many pages does the pager have",name:"numberOfPages",required:!0,type:{name:"number"}},pageDownDisabled:{defaultValue:null,description:"Should the page down button be disabled",name:"pageDownDisabled",required:!0,type:{name:"boolean"}},onPageDownClick:{defaultValue:null,description:"Callback for clicking on the page down button",name:"onPageDownClick",required:!0,type:{name:"VoidFunction"}},pageUpDisabled:{defaultValue:null,description:"Should the page up button be disabled",name:"pageUpDisabled",required:!0,type:{name:"boolean"}},onPageUpClick:{defaultValue:null,description:"Callback for clicking on the page down button",name:"onPageUpClick",required:!0,type:{name:"VoidFunction"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/pagination/Pager.tsx#Pager"]={docgenInfo:Pager.__docgenInfo,name:"Pager",path:"src/components/pagination/Pager.tsx#Pager"})}catch(__react_docgen_typescript_loader_error){}},"./src/lib/hooks/usePager.ts":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Y:function(){return usePager}});var _home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");function pagerReducer(state,action){var currentPage,numberOfPages;switch(action.type){case"PAGE_UP":return state.currentPage<state.numberOfPages?(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{currentPage:state.currentPage+1}):state;case"PAGE_DOWN":return state.currentPage>1?(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{currentPage:state.currentPage-1}):state;case"GO_TO_LAST_PAGE":return(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{currentPage:state.numberOfPages});case"SET_NUMBER_OF_PAGES":return(numberOfPages=action.numberOfPages)<0&&(numberOfPages=0),(currentPage=state.currentPage)>numberOfPages?currentPage=numberOfPages:0===currentPage&&(currentPage=1),(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{numberOfPages:numberOfPages,currentPage:currentPage});case"SET_CURRENT_PAGE":return(currentPage=action.currentPage)<1?currentPage=1:currentPage>state.numberOfPages&&(currentPage=state.numberOfPages),(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{currentPage:currentPage})}return state}function usePager(_ref){var initialCurrentPage=_ref.initialCurrentPage,initialNumberOfPages=_ref.initialNumberOfPages,_useReducer=(0,react__WEBPACK_IMPORTED_MODULE_0__.useReducer)(pagerReducer,{currentPage:initialCurrentPage,numberOfPages:initialNumberOfPages}),_useReducer2=(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_2__.Z)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],setNumberOfPages=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(numberOfPages){return dispatch({type:"SET_NUMBER_OF_PAGES",numberOfPages:numberOfPages})}),[dispatch]),goToLastPage=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){return dispatch({type:"GO_TO_LAST_PAGE"})}),[dispatch]),onPageUpClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){return dispatch({type:"PAGE_UP"})}),[dispatch]),onPageDownClick=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(){return dispatch({type:"PAGE_DOWN"})}),[dispatch]),setCurrentPage=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(currentPage){return dispatch({type:"SET_CURRENT_PAGE",currentPage:currentPage})}),[dispatch]);return(0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)((0,_home_runner_work_stan_client_stan_client_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_1__.Z)({},state),{},{setCurrentPage:setCurrentPage,setNumberOfPages:setNumberOfPages,goToLastPage:goToLastPage,onPageUpClick:onPageUpClick,onPageDownClick:onPageDownClick,pageUpDisabled:state.currentPage===state.numberOfPages,pageDownDisabled:1===state.currentPage})}}}]);